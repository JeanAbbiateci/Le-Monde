<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta property="og:image" content=""/>
    <meta property="og:author" content="Maxime Vaudano"/>
    <meta property="og:description" content=""/>
    
    <link href="css/mycss.css" media="screen" rel="stylesheet" type="text/css">
    <link href="css/lemonde.css" media="screen" rel="stylesheet" type="text/css">
    <link href="css/decodeurs.css" media="screen" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="http://s1.lemde.fr/medias/web/css/fonts.css"/>
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>


<script type='text/javascript'>//<![CDATA[ 

$(function () {
        var chart;
       


        Highcharts.setOptions({
            lang: {
            thousandsSep: [' '],
            decimalPoint: [',']
            }
        });
        
        $('#endettement').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 60,
                spacingTop: 70
            },
            title: {
                text: 'Combien chaque habitant supporte-t-il de dettes ?',
                y: -45,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '14pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Encours de la dette par habitant en 2012 (derniers chiffres disponibles).',
                verticalAlign: 'top',
                y: -20,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Le Mans","Clermont-Ferrand","Aix-en-Provence","Brest","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Saint-Denis","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Créteil","Avignon","Nanterre","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                },
                tickWidth: 0
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high',
                    style: {
                        fontSize: '13pt'
                    }
                },
                labels: {
                    enabled: false
                },
                plotLines: [{
                    color: '#ccc',
                    value: 1109,
                    width: 1,
                    label: {
                        text: "Moyenne des 50 villes",
                        rotation: 90,
                        verticalAlign: 'top',
                        align: 'center',
                        y: -70,
                        x: 7
                    }
                }],
                gridLineWidth: 0
            },
            tooltip: {
                shared: true,
                backgroundColor: 'rgba(255,255,255,1)',
                borderRadius: 0,
                borderWidth: 2,
                useHTML: true,
                formatter: function() {
                    var chart = this.points[0].series.chart; //get the chart object
                    var categories = chart.xAxis[0].categories; //get the categories array
                    var contenu = "<h2>"+this.x+" ("+this.points[0].point["parti"]+") : encours de la dette par habitant</h2>";
                    contenu += "<ul><li><big>2008 :</big> "+this.points[0].point['2008']+" €</li><li><big>2012 :</big> "+this.points[0].point['numeraire2012']+" €</p>";
                    if(this.points[0].point['evolution2012'] > 0) { 
                               numeraire = "+ "+this.points[0].point['evolution2012']; 
                    }
                    else { numeraire = this.points[0].point['evolution2012'] };
                    if(this.points[0].point['pourcentage'] > 0) { 
                               numeraire2 = "+ "+Highcharts.numberFormat(this.points[0].point['pourcentage'],1,',',' '); 
                    }
                    else { numeraire2 = Highcharts.numberFormat(this.points[0].point['pourcentage'],1,',',' ') };
                    contenu += "</li><li><big>Evolution 2008-2012 :</big> "+numeraire+" € ("+numeraire2+" %)</li></ul>";
                    contenu += "";
                    return contenu;
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0,
                    dataLabels: {
                        enabled: true,
                        style: {
                            fontWeight: 'bold'
                        },
                        formatter: function() {
                            if(this.series.index == 1) { 
                                if(this.y > 0) { 
                                   numeraire = "+ "+this.y; 
                                }
                                else { numeraire = this.y };
                                return numeraire+" €"; 
                            }
                            else { return this.y+" €" };                        
                        }
                    },
                    colorByPoint: true
                },
                series: {
                    events: {
                        /*hide: function() { sortData(chart); },*/
                        /*show: function() { sortData(chart,1); }*/
                    }                        
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Encours de la dette par habitant",
                data: [{name:"Paris",y:1444,"parti":"PS","2008":1083},
{name:"Marseille",y:2103,"parti":"UMP","2008":2291},
{name:"Lyon",y:710,"parti":"PS","2008":949},
{name:"Toulouse",y:141,"parti":"PS","2008":158},
{name:"Nice",y:1117,"parti":"UMP","2008":1106},
{name:"Nantes",y:874,"parti":"PS","2008":1119},
{name:"Strasbourg",y:443,"parti":"PS","2008":421},
{name:"Montpellier",y:887,"parti":"PS","2008":490},
{name:"Bordeaux",y:828,"parti":"UMP","2008":859},
{name:"Lille",y:1539,"parti":"PS","2008":847},
{name:"Rennes",y:726,"parti":"PS","2008":804},
{name:"Reims",y:1722,"parti":"PS","2008":1738},
{name:"Le Havre",y:1372,"parti":"UMP","2008":1210},
{name:"Saint-Etienne",y:2123,"parti":"PS","2008":2075},
{name:"Toulon",y:621,"parti":"UMP","2008":842},
{name:"Grenoble",y:1689,"parti":"PS","2008":1755},
{name:"Dijon",y:1144,"parti":"PS","2008":1275},
{name:"Angers",y:153,"parti":"PS","2008":5},
{name:"Villeurbanne",y:22,"parti":"PS","2008":16},
{name:"Nimes",y:1473,"parti":"UMP","2008":1623},
{name:"Le Mans",y:582,"parti":"PS","2008":349},
{name:"Clermont-Ferrand",y:1050,"parti":"PS","2008":927},
{name:"Aix-en-Provence",y:852,"parti":"UMP","2008":900},
{name:"Brest",y:451,"parti":"PS","2008":418},
{name:"Limoges",y:812,"parti":"PS","2008":950},
{name:"Tours",y:1722,"parti":"PS","2008":1793},
{name:"Amiens",y:667,"parti":"PS","2008":592},
{name:"Metz",y:134,"parti":"PS","2008":98},
{name:"Perpignan",y:1904,"parti":"UMP","2008":2235},
{name:"Boulogne-Billancourt",y:795,"parti":"UMP","2008":1298},
{name:"Besancon",y:938,"parti":"PS","2008":825},
{name:"Orléans",y:866,"parti":"UMP","2008":837},
{name:"Rouen",y:1674,"parti":"PS","2008":1498},
{name:"Mulhouse",y:1342,"parti":"UMP","2008":1189},
{name:"Caen",y:863,"parti":"PS","2008":861},
{name:"Saint-Denis",y:925,"parti":"PCF","2008":1452},
{name:"Nancy",y:983,"parti":"UDI","2008":1034},
{name:"Argenteuil",y:2169,"parti":"PS","2008":2261},
{name:"Montreuil",y:1637,"parti":"EELV","2008":2308},
{name:"Roubaix",y:1232,"parti":"PS","2008":1265},
{name:"Tourcoing",y:1268,"parti":"PS","2008":881},
{name:"Dunkerque",y:731,"parti":"PS","2008":1059},
{name:"Créteil",y:1551,"parti":"PS","2008":1709},
{name:"Avignon",y:2128,"parti":"UMP","2008":2428},
{name:"Nanterre",y:1587,"parti":"Front de gauche / FASE","2008":1563},
{name:"Courbevoie",y:793,"parti":"UMP","2008":578},
{name:"Poitiers",y:1264,"parti":"PS","2008":1078},
{name:"Vitry-sur-Seine",y:1389,"parti":"Front de gauche / PCF","2008":1137},
{name:"Versailles",y:700,"parti":"UMP","2008":749},
{name:"Colombes",y:1290,"parti":"PS","2008":1373}]
         },{
                name: "Evolution de l'encours de la dette par habitant (2008-2012)",
                data: [{name:"Paris",y:361,"parti":"PS","pourcentage":33.33},
{name:"Marseille",y:-188,"parti":"UMP","pourcentage":-8.21},
{name:"Lyon",y:-239,"parti":"PS","pourcentage":-25.18},
{name:"Toulouse",y:-17,"parti":"PS","pourcentage":-10.76},
{name:"Nice",y:11,"parti":"UMP","pourcentage":0.99},
{name:"Nantes",y:-245,"parti":"PS","pourcentage":-21.89},
{name:"Strasbourg",y:22,"parti":"PS","pourcentage":5.23},
{name:"Montpellier",y:397,"parti":"PS","pourcentage":81.02},
{name:"Bordeaux",y:-31,"parti":"UMP","pourcentage":-3.61},
{name:"Lille",y:692,"parti":"PS","pourcentage":81.70},
{name:"Rennes",y:-78,"parti":"PS","pourcentage":-9.70},
{name:"Reims",y:-16,"parti":"PS","pourcentage":-0.92},
{name:"Le Havre",y:162,"parti":"UMP","pourcentage":13.39},
{name:"Saint-Etienne",y:48,"parti":"PS","pourcentage":2.31},
{name:"Toulon",y:-221,"parti":"UMP","pourcentage":-26.25},
{name:"Grenoble",y:-66,"parti":"PS","pourcentage":-3.76},
{name:"Dijon",y:-131,"parti":"PS","pourcentage":-10.27},
{name:"Angers",y:148,"parti":"PS","pourcentage":2960.00},
{name:"Villeurbanne",y:6,"parti":"PS","pourcentage":37.50},
{name:"Nimes",y:-150,"parti":"UMP","pourcentage":-9.24},
{name:"Le Mans",y:233,"parti":"PS","pourcentage":66.76},
{name:"Clermont-Ferrand",y:123,"parti":"PS","pourcentage":13.27},
{name:"Aix-en-Provence",y:-48,"parti":"UMP","pourcentage":-5.33},
{name:"Brest",y:33,"parti":"PS","pourcentage":7.89},
{name:"Limoges",y:-138,"parti":"PS","pourcentage":-14.53},
{name:"Tours",y:-71,"parti":"PS","pourcentage":-3.96},
{name:"Amiens",y:75,"parti":"PS","pourcentage":12.67},
{name:"Metz",y:36,"parti":"PS","pourcentage":36.73},
{name:"Perpignan",y:-331,"parti":"UMP","pourcentage":-14.81},
{name:"Boulogne-Billancourt",y:-503,"parti":"UMP","pourcentage":-38.75},
{name:"Besancon",y:113,"parti":"PS","pourcentage":13.70},
{name:"Orléans",y:29,"parti":"UMP","pourcentage":3.46},
{name:"Rouen",y:176,"parti":"PS","pourcentage":11.75},
{name:"Mulhouse",y:153,"parti":"UMP","pourcentage":12.87},
{name:"Caen",y:2,"parti":"PS","pourcentage":0.23},
{name:"Saint-Denis",y:-527,"parti":"PCF","pourcentage":-36.29},
{name:"Nancy",y:-51,"parti":"UDI","pourcentage":-4.93},
{name:"Argenteuil",y:-92,"parti":"PS","pourcentage":-4.07},
{name:"Montreuil",y:-671,"parti":"EELV","pourcentage":-29.07},
{name:"Roubaix",y:-33,"parti":"PS","pourcentage":-2.61},
{name:"Tourcoing",y:387,"parti":"PS","pourcentage":43.93},
{name:"Dunkerque",y:-328,"parti":"PS","pourcentage":-30.97},
{name:"Créteil",y:-158,"parti":"PS","pourcentage":-9.25},
{name:"Avignon",y:-300,"parti":"UMP","pourcentage":-12.36},
{name:"Nanterre",y:24,"parti":"Front de gauche / FASE","pourcentage":1.54},
{name:"Courbevoie",y:215,"parti":"UMP","pourcentage":37.20},
{name:"Poitiers",y:186,"parti":"PS","pourcentage":17.25},
{name:"Vitry-sur-Seine",y:252,"parti":"Front de gauche / PCF","pourcentage":22.16},
{name:"Versailles",y:-49,"parti":"UMP","pourcentage":-6.54},
{name:"Colombes",y:-83,"parti":"PS","pourcentage":-6.05}]
            }]
        },
        function(chart) { 
           
                var chart2 = $("#endettement").highcharts(),
                $button = $('#button');
                var serie1 = chart2.series[0];
                var serie2 = chart2.series[1];
      
                chart2.series[1].setVisible(false,false);
                /*serie2.hide();*/
                /*console.log(chart2)*/
                sortData(chart,0); // Classe selon la 1ère série (0), affiche la 1ère série seulement (0)

                $button.click(function() {

                    if (serie1.visible) {
                            /*serie1.hide();
                            serie2.show();*/
                             var chart2 = $("#endettement").highcharts();
                            /*console.log(chart2.series)*/
                            /*chart2.series[0].setVisible(false,false);
                            chart2.series[1].setVisible(true,false);*/
                            /*console.log(chart2)*/
                            sortData(chart2,1); // Classe selon la 2ème série (1), affiche la 2ème série seulement (1)
                            
                            
                            
                            $button.html("Cliquez pour retourner aux chiffres de 2012");
                            $button.removeClass("btn_fonce");
                            $button.addClass("btn");
                            chart.setTitle({text: 'Combien chaque habitant supporte-t-il de dettes ?'},{text: 'Evolution de l\'encours de la dette par habitant entre 2008 et 2012 (derniers chiffres disponibles).'});
                    } else {

                            var chart2 = $('#endettement').highcharts();
                            sortData(chart2,0); // Classe selon la 1ère série (0), affiche la 1ère série seulement (0)
                            /*chart2.series[0].setVisible(true,false);
                            chart2.series[1].setVisible(false,false);*/

                            $button.html('Cliquez pour voir l\'évolution 2008-2012');
                            $button.addClass("btn_fonce");
                            $button.removeClass("btn");
                            chart.setTitle({text: 'Combien chaque habitant supporte-t-il de dettes ?'},{text: 'Encours de la dette par habitant en 2012 (derniers chiffres disponibles).'});
                            
                    }
                });

        });




       



         $('#taxehabitation').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 10,
                spacingRight: 60,
                spacingTop: 80
            },
            title: {
                text: 'Combien chaque habitant paye-t-il de taxe d\'habitation ?',
                y: -55,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '14pt',
                    lineHeight: '22pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Produit de la taxe d\'habitation par habitant (2012).',
                verticalAlign: 'top',
                y: -10,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Le Mans","Clermont-Ferrand","Aix-en-Provence","Brest","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Saint-Denis","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Créteil","Avignon","Nanterre","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                }
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high'
                },
                labels: {
                    enabled: false
                },
                min:0,
                max: 450,
                plotLines: [{
                    color: '#ccc',
                    value: 218.6,
                    width: 1,
                    label: {
                        text: "Moyenne des 50 villes",
                        rotation: 0,
                        verticalAlign: 'bottom',
                        align: 'center',
                        y: 0,
                        x: -5
                    }
                }],
                gridLineWidth: 0
            },
            tooltip: {
                shared: true,
                backgroundColor: 'rgba(255,255,255,1)',
                borderRadius: 0,
                borderWidth: 2,
                useHTML: true,
                formatter: function() {
                    var chart = this.points[0].series.chart; //get the chart object
                    var categories = chart.xAxis[0].categories; //get the categories array
                    var contenu = "<h2>"+this.x+" ("+this.points[0].point["parti"]+") : produit de la taxe d\'habitation par habitant</h2>";
                    contenu += "<ul><li><big>2009 :</big> "+this.points[0].point['2009']+" €</li><li><big>2012 :</big> "+this.points[0].point['numeraire2012']+" €</li>";
                    if(this.points[0].point['evolution2012'] > 0) { 
                               numeraire = "+ "+this.points[0].point['evolution2012']; 
                    }
                    else { numeraire = this.points[0].point['evolution2012'] };
                    if(this.points[0].point['pourcentage'] > 0) { 
                               numeraire2 = "+ "+Highcharts.numberFormat(this.points[0].point['pourcentage'],1,',',' '); 
                    }
                    else { numeraire2 = Highcharts.numberFormat(this.points[0].point['pourcentage'],1,',',' ') };
                    contenu += "<li><big>Evolution 2009-2012 :</big> "+numeraire+" € ("+numeraire2+" %)</li></ul>";
                      
                    return contenu;
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0,
                    dataLabels: {
                        enabled: true,
                        style: {
                            fontWeight: 'bold'
                        },
                        formatter: function() {
                            if(this.series.index == 1) { 
                                if(this.y > 0) { 
                                   numeraire = "+ "+this.y; 
                                }
                                else { numeraire = this.y };
                                return numeraire+" €"; 
                            }
                            else { return this.y+" €" };                        
                        }
                    },
                    colorByPoint: true
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Produit de la taxe d\'habitation par habitant",
                data: [{name:"Paris",y:310,"parti":"PS","2009":212},
                    {name:"Marseille",y:288,"parti":"UMP","2009":229},
                    {name:"Lyon",y:325,"parti":"PS","2009":298},
                    {name:"Toulouse",y:199,"parti":"PS","2009":180},
                    {name:"Nice",y:367,"parti":"UMP","2009":336},
                    {name:"Nantes",y:304,"parti":"PS","2009":274},
                    {name:"Strasbourg",y:230,"parti":"PS","2009":211},
                    {name:"Montpellier",y:286,"parti":"PS","2009":257},
                    {name:"Bordeaux",y:352,"parti":"UMP","2009":326},
                    {name:"Lille",y:301,"parti":"PS","2009":276},
                    {name:"Rennes",y:305,"parti":"PS","2009":264},
                    {name:"Reims",y:247,"parti":"PS","2009":225},
                    {name:"Le Havre",y:208,"parti":"UMP","2009":187},
                    {name:"Saint-Etienne",y:259,"parti":"PS","2009":232},
                    {name:"Toulon",y:244,"parti":"UMP","2009":224},
                    {name:"Grenoble",y:298,"parti":"PS","2009":270},
                    {name:"Dijon",y:257,"parti":"PS","2009":229},
                    {name:"Angers",y:236,"parti":"PS","2009":201},
                    {name:"Villeurbanne",y:250,"parti":"PS","2009":235},
                    {name:"Nimes",y:333,"parti":"UMP","2009":301},
                    {name:"Le Mans",y:199,"parti":"PS","2009":109},
                    {name:"Clermont-Ferrand",y:255,"parti":"PS","2009":220},
                    {name:"Aix-en-Provence",y:242,"parti":"UMP","2009":217},
                    {name:"Brest",y:243,"parti":"PS","2009":203},
                    {name:"Limoges",y:272,"parti":"PS","2009":259},
                    {name:"Tours",y:249,"parti":"PS","2009":225},
                    {name:"Amiens",y:204,"parti":"PS","2009":188},
                    {name:"Metz",y:211,"parti":"PS","2009":191},
                    {name:"Perpignan",y:261,"parti":"UMP","2009":219},
                    {name:"Boulogne-Billancourt",y:259,"parti":"UMP","2009":237},
                    {name:"Besancon",y:301,"parti":"PS","2009":279},
                    {name:"Orléans",y:262,"parti":"UMP","2009":248},
                    {name:"Rouen",y:284,"parti":"PS","2009":253},
                    {name:"Mulhouse",y:187,"parti":"UMP","2009":163},
                    {name:"Caen",y:249,"parti":"PS","2009":234},
                    {name:"Saint-Denis",y:174,"parti":"PCF","2009":152},
                    {name:"Nancy",y:193,"parti":"UDI","2009":178},
                    {name:"Argenteuil",y:232,"parti":"PS","2009":203},
                    {name:"Montreuil",y:255,"parti":"EELV","2009":112},
                    {name:"Roubaix",y:145,"parti":"PS","2009":127},
                    {name:"Tourcoing",y:203,"parti":"PS","2009":162},
                    {name:"Dunkerque",y:250,"parti":"PS","2009":238},
                    {name:"Créteil",y:255,"parti":"PS","2009":235},
                    {name:"Avignon",y:257,"parti":"UMP","2009":230},
                    {name:"Nanterre",y:105,"parti":"Front de gauche / FASE","2009":93},
                    {name:"Courbevoie",y:161,"parti":"UMP","2009":143},
                    {name:"Poitiers",y:295,"parti":"PS","2009":267},
                    {name:"Vitry-sur-Seine",y:235,"parti":"Front de gauche / PCF","2009":131},
                    {name:"Versailles",y:272,"parti":"UMP","2009":240},
                    {name:"Colombes",y:328,"parti":"PS","2009":207}]
                     },{
                name: "Evolution du produit par habitant de la taxe d\'habitation par habitant",
                data:[{name:"Paris",y:98,"pourcentage":46.23,"parti":"PS"},
                    {name:"Marseille",y:59,"pourcentage":25.76,"parti":"UMP"},
                    {name:"Lyon",y:27,"pourcentage":9.06,"parti":"PS"},
                    {name:"Toulouse",y:19,"pourcentage":10.56,"parti":"PS"},
                    {name:"Nice",y:31,"pourcentage":9.23,"parti":"UMP"},
                    {name:"Nantes",y:30,"pourcentage":10.95,"parti":"PS"},
                    {name:"Strasbourg",y:19,"pourcentage":9.00,"parti":"PS"},
                    {name:"Montpellier",y:29,"pourcentage":11.28,"parti":"PS"},
                    {name:"Bordeaux",y:26,"pourcentage":7.98,"parti":"UMP"},
                    {name:"Lille",y:25,"pourcentage":9.06,"parti":"PS"},
                    {name:"Rennes",y:41,"pourcentage":15.53,"parti":"PS"},
                    {name:"Reims",y:22,"pourcentage":9.78,"parti":"PS"},
                    {name:"Le Havre",y:21,"pourcentage":11.23,"parti":"UMP"},
                    {name:"Saint-Etienne",y:27,"pourcentage":11.64,"parti":"PS"},
                    {name:"Toulon",y:20,"pourcentage":8.93,"parti":"UMP"},
                    {name:"Grenoble",y:28,"pourcentage":10.37,"parti":"PS"},
                    {name:"Dijon",y:28,"pourcentage":12.23,"parti":"PS"},
                    {name:"Angers",y:35,"pourcentage":17.41,"parti":"PS"},
                    {name:"Villeurbanne",y:15,"pourcentage":6.38,"parti":"PS"},
                    {name:"Nimes",y:32,"pourcentage":10.63,"parti":"UMP"},
                    {name:"Le Mans",y:90,"pourcentage":82.57,"parti":"PS"},
                    {name:"Clermont-Ferrand",y:35,"pourcentage":15.91,"parti":"PS"},
                    {name:"Aix-en-Provence",y:25,"pourcentage":11.52,"parti":"UMP"},
                    {name:"Brest",y:40,"pourcentage":19.70,"parti":"PS"},
                    {name:"Limoges",y:13,"pourcentage":5.02,"parti":"PS"},
                    {name:"Tours",y:24,"pourcentage":10.67,"parti":"PS"},
                    {name:"Amiens",y:16,"pourcentage":8.51,"parti":"PS"},
                    {name:"Metz",y:20,"pourcentage":10.47,"parti":"PS"},
                    {name:"Perpignan",y:42,"pourcentage":19.18,"parti":"UMP"},
                    {name:"Boulogne-Billancourt",y:22,"pourcentage":9.28,"parti":"UMP"},
                    {name:"Besancon",y:22,"pourcentage":7.89,"parti":"PS"},
                    {name:"Orléans",y:14,"pourcentage":5.65,"parti":"UMP"},
                    {name:"Rouen",y:31,"pourcentage":12.25,"parti":"PS"},
                    {name:"Mulhouse",y:24,"pourcentage":14.72,"parti":"UMP"},
                    {name:"Caen",y:15,"pourcentage":6.41,"parti":"PS"},
                    {name:"Saint-Denis",y:22,"pourcentage":14.47,"parti":"PCF"},
                    {name:"Nancy",y:15,"pourcentage":8.43,"parti":"UDI"},
                    {name:"Argenteuil",y:29,"pourcentage":14.29,"parti":"PS"},
                    {name:"Montreuil",y:143,"pourcentage":127.68,"parti":"EELV"},
                    {name:"Roubaix",y:18,"pourcentage":14.17,"parti":"PS"},
                    {name:"Tourcoing",y:41,"pourcentage":25.31,"parti":"PS"},
                    {name:"Dunkerque",y:12,"pourcentage":5.04,"parti":"PS"},
                    {name:"Créteil",y:20,"pourcentage":8.51,"parti":"PS"},
                    {name:"Avignon",y:27,"pourcentage":11.74,"parti":"UMP"},
                    {name:"Nanterre",y:12,"pourcentage":12.90,"parti":"Front de gauche / FASE"},
                    {name:"Courbevoie",y:18,"pourcentage":12.59,"parti":"UMP"},
                    {name:"Poitiers",y:28,"pourcentage":10.49,"parti":"PS"},
                    {name:"Vitry-sur-Seine",y:104,"pourcentage":79.39,"parti":"Front de gauche / PCF"},
                    {name:"Versailles",y:32,"pourcentage":13.33,"parti":"UMP"},
                    {name:"Colombes",y:121,"pourcentage":58.45,"parti":"PS"}]
            }]
        },
        function(chart) { 
             // On trie en fonction du y de la première série
                
                var chart3 = $("#taxehabitation").highcharts(),
                $button = $('#button2');
                var serie1 = chart3.series[0];
                var serie2 = chart3.series[1];
               /* serie2.hide();*/
                chart3.series[1].setVisible(false,false);
                sortData(chart3,0);

                $button.click(function() {

                    if (serie1.visible) {
                            /*serie1.hide();
                            serie2.show();*/

                            var chart3 = $('#taxehabitation').highcharts();
                            sortData(chart3,1); // Classe selon la 2ème série (1), affiche la 2ème série seulement (1)
                            
                            $button.html("Cliquez pour retourner aux chiffres de 2012");
                            $button.removeClass("btn_fonce");
                            $button.addClass("btn");
                            chart3.setTitle({ text: 'Combien chaque habitant paye-t-il de taxe d\'habitation ?' },{ text: 'Evolution du produit de la taxe d\'habitation par habitant (2009-2012).'} )
                    } else {

                            var chart3 = $('#taxehabitation').highcharts();
                            sortData(chart3,0); // Classe selon la 1ère série (0), affiche la 1ère série seulement (0)
                           /* chart3.series[0].setVisible(true,false);
                            chart3.series[1].setVisible(false,false);*/

                            $button.html('Cliquez pour voir l\'évolution 2009-2012');
                            $button.removeClass("btn");
                            $button.addClass("btn_fonce");
                            chart3.setTitle( { text: 'Combien chaque habitant paye-t-il de taxe d\'habitation ?' },{ text: 'Produit de la taxe d\'habitation par habitant (2012).'} );
                            
                    }
                });

        });
    
        










    $('#taxefoncier').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 10,
                spacingRight: 30,
                spacingTop: 90
            },
            title: {
                text: 'Combien chaque habitant paye-t-il de taxe sur le foncier bâti ?',
                y: -65,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '16pt',
                    lineHeight: '22pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Produit de la taxe sur le foncier bâti par habitant (2012).',
                verticalAlign: 'top',
                y: -18,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Le Mans","Clermont-Ferrand","Aix-en-Provence","Brest","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Saint-Denis","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Créteil","Avignon","Nanterre","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                }
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high'
                },
                labels: {
                    enabled: false
                },
                plotLines: [{
                    color: '#ccc',
                    value: 293.3,
                    width: 1,
                    label: {
                        text: "Moyenne des 50 villes",
                        rotation: 0,
                        verticalAlign: 'bottom',
                        align: 'left',
                        y: 0,
                        x: -5
                    }
                }],
                gridLineWidth: 0
            },
            tooltip: {
                shared: true,
                backgroundColor: 'rgba(255,255,255,1)',
                borderRadius: 0,
                borderWidth: 2,
                useHTML: true,
                formatter: function() {
                    var chart = this.points[0].series.chart; //get the chart object
                    var categories = chart.xAxis[0].categories; //get the categories array
                    var contenu = "<h2>"+this.x+" ("+this.points[0].point["parti"]+") : produit de la taxe sur le foncier bâti par habitant</h2>";
                    contenu += "<ul><li><big>2009 :</big> "+this.points[0].point['2009']+" €</li><li><big>2012 :</big> "+this.points[0].point['numeraire2012']+" €</li>";
                    if(this.points[0].point['evolution2012'] > 0) { 
                               numeraire = "+ "+this.points[0].point['evolution2012']; 
                    }
                    else { numeraire = this.points[0].point['evolution2012'] };
                    if(this.points[0].point['pourcentage'] > 0) { 
                               numeraire2 = "+ "+Highcharts.numberFormat(this.points[0].point['pourcentage'],1,',',' '); 
                    }
                    else { numeraire2 = Highcharts.numberFormat(this.points[0].point['pourcentage'],1,',',' ') };
                    contenu += "</li><li><big>Evolution 2009-2012 :</big> "+numeraire+" € ("+numeraire2+" %)</li></ul>";
                      
                    return contenu;
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0,
                    dataLabels: {
                        enabled: true,
                        style: {
                            fontWeight: 'bold'
                        },
                        formatter: function() {
                            if(this.series.index == 1) { 
                                if(this.y > 0) { 
                                   numeraire = "+ "+this.y; 
                                }
                                else { numeraire = this.y };
                                return numeraire+" €"; 
                            }
                            else { return this.y+" €" };                        
                        }
                    },
                    colorByPoint: true
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Produit de la taxe sur le foncier bâti par habitant",
                data: [{name:"Paris",y:258,"2009":231,"parti":"PS"},
                    {name:"Marseille",y:220,"2009":195,"parti":"UMP"},
                    {name:"Lyon",y:286,"2009":260,"parti":"PS"},
                    {name:"Toulouse",y:247,"2009":213,"parti":"PS"},
                    {name:"Nice",y:387,"2009":356,"parti":"UMP"},
                    {name:"Nantes",y:322,"2009":288,"parti":"PS"},
                    {name:"Strasbourg",y:269,"2009":249,"parti":"PS"},
                    {name:"Montpellier",y:382,"2009":350,"parti":"PS"},
                    {name:"Bordeaux",y:420,"2009":395,"parti":"UMP"},
                    {name:"Lille",y:248,"2009":229,"parti":"PS"},
                    {name:"Rennes",y:286,"2009":246,"parti":"PS"},
                    {name:"Reims",y:375,"2009":343,"parti":"PS"},
                    {name:"Le Havre",y:332,"2009":299,"parti":"UMP"},
                    {name:"Saint-Etienne",y:295,"2009":264,"parti":"PS"},
                    {name:"Toulon",y:263,"2009":241,"parti":"UMP"},
                    {name:"Grenoble",y:490,"2009":447,"parti":"PS"},
                    {name:"Dijon",y:342,"2009":304,"parti":"PS"},
                    {name:"Angers",y:356,"2009":302,"parti":"PS"},
                    {name:"Villeurbanne",y:205,"2009":197,"parti":"PS"},
                    {name:"Nimes",y:367,"2009":325,"parti":"UMP"},
                    {name:"Le Mans",y:152,"2009":130,"parti":"PS"},
                    {name:"Clermont-Ferrand",y:317,"2009":273,"parti":"PS"},
                    {name:"Aix-en-Provence",y:235,"2009":207,"parti":"UMP"},
                    {name:"Brest",y:250,"2009":220,"parti":"PS"},
                    {name:"Limoges",y:224,"2009":203,"parti":"PS"},
                    {name:"Tours",y:255,"2009":230,"parti":"PS"},
                    {name:"Amiens",y:318,"2009":286,"parti":"PS"},
                    {name:"Metz",y:209,"2009":183,"parti":"PS"},
                    {name:"Perpignan",y:371,"2009":307,"parti":"UMP"},
                    {name:"Boulogne-Billancourt",y:223,"2009":206,"parti":"UMP"},
                    {name:"Besancon",y:309,"2009":275,"parti":"PS"},
                    {name:"Orléans",y:377,"2009":349,"parti":"UMP"},
                    {name:"Rouen",y:319,"2009":274,"parti":"PS"},
                    {name:"Mulhouse",y:241,"2009":207,"parti":"UMP"},
                    {name:"Caen",y:336,"2009":313,"parti":"PS"},
                    {name:"Saint-Denis",y:263,"2009":236,"parti":"PCF"},
                    {name:"Nancy",y:174,"2009":162,"parti":"UDI"},
                    {name:"Argenteuil",y:282,"2009":239,"parti":"PS"},
                    {name:"Montreuil",y:372,"2009":143,"parti":"EELV"},
                    {name:"Roubaix",y:190,"2009":176,"parti":"PS"},
                    {name:"Tourcoing",y:194,"2009":181,"parti":"PS"},
                    {name:"Dunkerque",y:303,"2009":311,"parti":"PS"},
                    {name:"Créteil",y:350,"2009":328,"parti":"PS"},
                    {name:"Avignon",y:359,"2009":311,"parti":"UMP"},
                    {name:"Nanterre",y:308,"2009":270,"parti":"Front de gauche / FASE"},
                    {name:"Courbevoie",y:243,"2009":213,"parti":"UMP"},
                    {name:"Poitiers",y:305,"2009":277,"parti":"PS"},
                    {name:"Vitry-sur-Seine",y:258,"2009":246,"parti":"Front de gauche / PCF"},
                    {name:"Versailles",y:266,"2009":236,"parti":"UMP"},
                    {name:"Colombes",y:313,"2009":284,"parti":"PS"}]
                     },{
                name: "Evolution du produit par habitant de la taxe sur le foncier bâti par habitant",
                data:[{name:"Paris",y:27,"pourcentage":11.7,"parti":"PS"},
                    {name:"Marseille",y:25,"pourcentage":12.8,"parti":"UMP"},
                    {name:"Lyon",y:26,"pourcentage":10.0,"parti":"PS"},
                    {name:"Toulouse",y:34,"pourcentage":16.0,"parti":"PS"},
                    {name:"Nice",y:31,"pourcentage":8.7,"parti":"UMP"},
                    {name:"Nantes",y:34,"pourcentage":11.8,"parti":"PS"},
                    {name:"Strasbourg",y:20,"pourcentage":8.0,"parti":"PS"},
                    {name:"Montpellier",y:32,"pourcentage":9.1,"parti":"PS"},
                    {name:"Bordeaux",y:25,"pourcentage":6.3,"parti":"UMP"},
                    {name:"Lille",y:19,"pourcentage":8.3,"parti":"PS"},
                    {name:"Rennes",y:40,"pourcentage":16.3,"parti":"PS"},
                    {name:"Reims",y:32,"pourcentage":9.3,"parti":"PS"},
                    {name:"Le Havre",y:33,"pourcentage":11.0,"parti":"UMP"},
                    {name:"Saint-Etienne",y:31,"pourcentage":11.7,"parti":"PS"},
                    {name:"Toulon",y:22,"pourcentage":9.1,"parti":"UMP"},
                    {name:"Grenoble",y:43,"pourcentage":9.6,"parti":"PS"},
                    {name:"Dijon",y:38,"pourcentage":12.5,"parti":"PS"},
                    {name:"Angers",y:54,"pourcentage":17.9,"parti":"PS"},
                    {name:"Villeurbanne",y:8,"pourcentage":4.1,"parti":"PS"},
                    {name:"Nimes",y:42,"pourcentage":12.9,"parti":"UMP"},
                    {name:"Le Mans",y:22,"pourcentage":16.9,"parti":"PS"},
                    {name:"Clermont-Ferrand",y:44,"pourcentage":16.1,"parti":"PS"},
                    {name:"Aix-en-Provence",y:28,"pourcentage":13.5,"parti":"UMP"},
                    {name:"Brest",y:30,"pourcentage":13.6,"parti":"PS"},
                    {name:"Limoges",y:21,"pourcentage":10.3,"parti":"PS"},
                    {name:"Tours",y:25,"pourcentage":10.9,"parti":"PS"},
                    {name:"Amiens",y:32,"pourcentage":11.2,"parti":"PS"},
                    {name:"Metz",y:26,"pourcentage":14.2,"parti":"PS"},
                    {name:"Perpignan",y:64,"pourcentage":20.8,"parti":"UMP"},
                    {name:"Boulogne-Billancourt",y:17,"pourcentage":8.3,"parti":"UMP"},
                    {name:"Besancon",y:34,"pourcentage":12.4,"parti":"PS"},
                    {name:"Orléans",y:28,"pourcentage":8.0,"parti":"UMP"},
                    {name:"Rouen",y:45,"pourcentage":16.4,"parti":"PS"},
                    {name:"Mulhouse",y:34,"pourcentage":16.4,"parti":"UMP"},
                    {name:"Caen",y:23,"pourcentage":7.3,"parti":"PS"},
                    {name:"Saint-Denis",y:27,"pourcentage":11.4,"parti":"PCF"},
                    {name:"Nancy",y:12,"pourcentage":7.4,"parti":"UDI"},
                    {name:"Argenteuil",y:43,"pourcentage":18.0,"parti":"PS"},
                    {name:"Montreuil",y:229,"pourcentage":160.1,"parti":"EELV"},
                    {name:"Roubaix",y:14,"pourcentage":8.0,"parti":"PS"},
                    {name:"Tourcoing",y:13,"pourcentage":7.2,"parti":"PS"},
                    {name:"Dunkerque",y:-8,"pourcentage":-2.6,"parti":"PS"},
                    {name:"Créteil",y:22,"pourcentage":6.7,"parti":"PS"},
                    {name:"Avignon",y:48,"pourcentage":15.4,"parti":"UMP"},
                    {name:"Nanterre",y:38,"pourcentage":14.1,"parti":"Front de gauche / FASE"},
                    {name:"Courbevoie",y:30,"pourcentage":14.1,"parti":"UMP"},
                    {name:"Poitiers",y:28,"pourcentage":10.1,"parti":"PS"},
                    {name:"Vitry-sur-Seine",y:12,"pourcentage":4.9,"parti":"Front de gauche / PCF"},
                    {name:"Versailles",y:30,"pourcentage":12.7,"parti":"UMP"},
                    {name:"Colombes",y:29,"pourcentage":10.2,"parti":"PS"}]
            }]
        },
        function(chart) { 
             // On trie en fonction du y de la première série
                
                var chart4 = $("#taxefoncier").highcharts(),
                $button = $('#button3');
                var serie1 = chart4.series[0];
                var serie2 = chart4.series[1];
                /*serie2.hide();*/

                sortData(chart4,0);

                $button.click(function() {

                    if (serie1.visible) {
                            /*serie1.hide();
                            serie2.show();*/
                            var chart4 = $("#taxefoncier").highcharts();
                            sortData(chart4,1); // Classe selon la 2ème série (1), affiche la 2ème série seulement (1)
                            
                            
                            
                            $button.html("Cliquez pour retourner aux chiffres de 2012");
                            $button.removeClass("btn_fonce");
                            $button.addClass("btn");
                            chart4.setTitle( { text: 'Combien chaque habitant paye-t-il de taxe sur le foncier bâti ?' }, { text: 'Evolution du produit de la taxe sur le foncier bâti par habitant (2009-2012)' } )
                    } else {

                            var chart4 = $("#taxefoncier").highcharts();
                            sortData(chart4,0); // Classe selon la 1ère série (0), affiche la 1ère série seulement (0)
                            /*chart4.series[0].setVisible(true,false);
                            chart4.series[1].setVisible(false,false);*/

                            $button.html('Cliquez pour voir l\'évolution 2009-2012');
                            $button.removeClass("btn");
                            $button.addClass("btn_fonce");
                            chart4.setTitle( { text: 'Combien chaque habitant paye-t-il de taxe sur le foncier bâti ?' }, { text: 'Produit de la taxe sur le foncier bâti par habitant (2012)' } );
                            
                    }
                });

        });





$('#personnel').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 10,
                spacingRight: 60,
                spacingTop: 90
            },
            title: {
                text: 'Quel poids pour les personnels municipaux dans le budget municipal ?',
                y: -65,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '16pt',
                    lineHeight: '22pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Total des charges de personnel du budget, divisé par le nombre d\'habitants (2012).',
                verticalAlign: 'top',
                y: -20,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Le Mans","Clermont-Ferrand","Aix-en-Provence","Brest","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Saint-Denis","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Créteil","Avignon","Nanterre","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                }
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high'
                },
                labels: {
                    enabled: false
                },
                min: 0,/*
                max: 280,*/
                plotLines: [{
                    color: '#ccc',
                    value: 679,
                    width: 1,
                    label: {
                        text: "Moyenne des 50 villes",
                        rotation: 90,
                        verticalAlign: 'bottom',
                        align: 'center',
                        y: 0,
                        x: -5
                    }
                }],
                gridLineWidth: 0
            },
            tooltip: {
                shared: true,
                backgroundColor: 'rgba(255,255,255,1)',
                useHTML: true,
                borderRadius: 0,
                borderWidth: 2,
                formatter: function() {
                    var chart = this.points[0].series.chart; //get the chart object
                    var categories = chart.xAxis[0].categories; //get the categories array
                    var contenu = "<h2>"+this.x+" ("+this.points[0].point["parti"]+") : charges de personnel par habitant</h2>";
                    contenu += "<ul><li><big>2008 :</big> "+this.points[0].point['2008']+" € ("+Highcharts.numberFormat(this.points[0].point['partbudget2008'],1,',',' ')+" % du total des charges)</li><li><big>2012 :</big> "+this.points[0].point['numeraire2012']+" € ("+Highcharts.numberFormat(this.points[0].point['partbudget'],1,',',' ')+" % du total des charges)</li>";
                    if(this.points[0].point['evolution2012'] > 0) { 
                               numeraire = "+ "+this.points[0].point['evolution2012']; 
                    }
                    else { numeraire = this.points[0].point['evolution2012'] };
                    if(this.points[0].point['evolpartbudget'] > 0) { 
                               numeraire2 = "+ "+Highcharts.numberFormat(this.points[0].point['evolpartbudget'],1,',',' '); 
                    }
                    else { numeraire2 = Highcharts.numberFormat(this.points[0].point['evolpartbudget'],1,',',' ') };
                    contenu += "<li><big>Evolution 2008-2012 :</big> "+numeraire+" € ("+numeraire2+" points dans la part des charges)</li></ul>";
                      
                    return contenu;
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0.1,
                    dataLabels: {
                        enabled: true,
                        style: {
                            fontWeight: 'bold'
                        },
                        formatter: function() {
                            if(this.series.index == 1) { 
                                if(this.y > 0) { 
                                   numeraire = "+ "+this.y; 
                                }
                                else { numeraire = this.y };
                                return numeraire+" €"; 
                            }
                            else { return this.y+" €" };                        
                        }
                    },
                    colorByPoint: true
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Charges de personnel par habitant",
                data: [{name:"Paris",y:832,"partbudget":39.0,"2008":806,"partbudget2008":37.9,"parti":"PS"},
            {name:"Marseille",y:640,"partbudget":54.6,"2008":645,"partbudget2008":53.1,"parti":"UMP"},
            {name:"Lyon",y:618,"partbudget":54.1,"2008":675,"partbudget2008":53.2,"parti":"PS"},
            {name:"Toulouse",y:706,"partbudget":53.0,"2008":833,"partbudget2008":48.0,"parti":"PS"},
            {name:"Nice",y:720,"partbudget":42.7,"2008":774,"partbudget2008":47.2,"parti":"UMP"},
            {name:"Nantes",y:619,"partbudget":47.6,"2008":571,"partbudget2008":42.4,"parti":"PS"},
            {name:"Strasbourg",y:679,"partbudget":52.2,"2008":672,"partbudget2008":52.4,"parti":"PS"},
            {name:"Montpellier",y:588,"partbudget":52.8,"2008":535,"partbudget2008":44.8,"parti":"PS"},
            {name:"Bordeaux",y:705,"partbudget":48.7,"2008":719,"partbudget2008":47.1,"parti":"UMP"},
            {name:"Lille",y:762,"partbudget":57.5,"2008":732,"partbudget2008":54.0,"parti":"PS"},
            {name:"Rennes",y:709,"partbudget":55.7,"2008":646,"partbudget2008":48.0,"parti":"PS"},
            {name:"Reims",y:423,"partbudget":34.7,"2008":402,"partbudget2008":31.5,"parti":"PS"},
            {name:"Le Havre",y:766,"partbudget":54.2,"2008":675,"partbudget2008":48.2,"parti":"UMP"},
            {name:"Saint-Etienne",y:792,"partbudget":51.6,"2008":748,"partbudget2008":50.1,"parti":"PS"},
            {name:"Toulon",y:760,"partbudget":58.8,"2008":698,"partbudget2008":53.6,"parti":"UMP"},
            {name:"Grenoble",y:797,"partbudget":47.8,"2008":775,"partbudget2008":46.2,"parti":"PS"},
            {name:"Dijon",y:707,"partbudget":53.1,"2008":689,"partbudget2008":50.2,"parti":"PS"},
            {name:"Angers",y:647,"partbudget":48.9,"2008":573,"partbudget2008":41.4,"parti":"PS"},
            {name:"Villeurbanne",y:418,"partbudget":53.3,"2008":436,"partbudget2008":46.3,"parti":"PS"},
            {name:"Nimes",y:606,"partbudget":42.7,"2008":634,"partbudget2008":37.4,"parti":"UMP"},
            {name:"Le Mans",y:575,"partbudget":57.8,"2008":539,"partbudget2008":55.2,"parti":"PS"},
            {name:"Clermont-Ferrand",y:680,"partbudget":53.5,"2008":630,"partbudget2008":50.3,"parti":"PS"},
            {name:"Aix-en-Provence",y:627,"partbudget":47.5,"2008":630,"partbudget2008":50.2,"parti":"UMP"},
            {name:"Brest",y:299,"partbudget":39.5,"2008":12,"partbudget2008":1.7,"parti":"PS"},
            {name:"Limoges",y:613,"partbudget":54.5,"2008":612,"partbudget2008":50.8,"parti":"PS"},
            {name:"Tours",y:727,"partbudget":52.2,"2008":727,"partbudget2008":53.1,"parti":"PS"},
            {name:"Amiens",y:399,"partbudget":43.9,"2008":62,"partbudget2008":6.6,"parti":"PS"},
            {name:"Metz",y:577,"partbudget":46.0,"2008":518,"partbudget2008":32.9,"parti":"PS"},
            {name:"Perpignan",y:698,"partbudget":49.8,"2008":785,"partbudget2008":53.0,"parti":"UMP"},
            {name:"Boulogne-Billancourt",y:761,"partbudget":44.0,"2008":850,"partbudget2008":49.6,"parti":"UMP"},
            {name:"Besancon",y:721,"partbudget":53.7,"2008":651,"partbudget2008":48.4,"parti":"PS"},
            {name:"Orléans",y:662,"partbudget":47.7,"2008":642,"partbudget2008":44.7,"parti":"UMP"},
            {name:"Rouen",y:765,"partbudget":48.1,"2008":722,"partbudget2008":49.9,"parti":"PS"},
            {name:"Mulhouse",y:636,"partbudget":49.4,"2008":619,"partbudget2008":49.2,"parti":"UMP"},
            {name:"Caen",y:631,"partbudget":52.4,"2008":550,"partbudget2008":45.3,"parti":"PS"},
            {name:"Saint-Denis",y:870,"partbudget":59.0,"2008":996,"partbudget2008":56.4,"parti":"PCF"},
            {name:"Nancy",y:526,"partbudget":47.0,"2008":534,"partbudget2008":45.4,"parti":"UDI"},
            {name:"Argenteuil",y:697,"partbudget":56.9,"2008":798,"partbudget2008":55.8,"parti":"PS"},
            {name:"Montreuil",y:143,"partbudget":38.9,"2008":131,"partbudget2008":22.8,"parti":"EELV"},
            {name:"Roubaix",y:668,"partbudget":47.4,"2008":622,"partbudget2008":45.1,"parti":"PS"},
            {name:"Tourcoing",y:651,"partbudget":55.0,"2008":587,"partbudget2008":52.9,"parti":"PS"},
            {name:"Dunkerque",y:919,"partbudget":61.1,"2008":953,"partbudget2008":54.0,"parti":"PS"},
            {name:"Créteil",y:777,"partbudget":54.0,"2008":750,"partbudget2008":49.3,"parti":"PS"},
            {name:"Avignon",y:780,"partbudget":49.5,"2008":780,"partbudget2008":43.8,"parti":"UMP"},
            {name:"Nanterre",y:1180,"partbudget":59.3,"2008":1145,"partbudget2008":49.2,"parti":"Front de gauche / FASE"},
            {name:"Courbevoie",y:716,"partbudget":44.6,"2008":677,"partbudget2008":43.0,"parti":"UMP"},
            {name:"Poitiers",y:733,"partbudget":53.8,"2008":705,"partbudget2008":50.6,"parti":"PS"},
            {name:"Vitry-sur-Seine",y:895,"partbudget":51.3,"2008":831,"partbudget2008":44.0,"parti":"Front de gauche / PCF"},
            {name:"Versailles",y:730,"partbudget":56.1,"2008":740,"partbudget2008":52.7,"parti":"UMP"},
            {name:"Colombes",y:815,"partbudget":52.8,"2008":790,"partbudget2008":48.1,"parti":"PS"}]
                     },{
                name: "Evolution du produit par habitant de la taxe sur le foncier bâti par habitant",
                data:[{name:"Paris",y:26,"evolpartbudget":1.1,"parti":"PS"},
                    {name:"Marseille",y:-5,"evolpartbudget":1.5,"parti":"UMP"},
                    {name:"Lyon",y:-57,"evolpartbudget":0.9,"parti":"PS"},
                    {name:"Toulouse",y:-127,"evolpartbudget":5.0,"parti":"PS"},
                    {name:"Nice",y:-54,"evolpartbudget":-4.5,"parti":"UMP"},
                    {name:"Nantes",y:48,"evolpartbudget":5.2,"parti":"PS"},
                    {name:"Strasbourg",y:7,"evolpartbudget":-0.2,"parti":"PS"},
                    {name:"Montpellier",y:53,"evolpartbudget":8.1,"parti":"PS"},
                    {name:"Bordeaux",y:-14,"evolpartbudget":1.5,"parti":"UMP"},
                    {name:"Lille",y:30,"evolpartbudget":3.5,"parti":"PS"},
                    {name:"Rennes",y:63,"evolpartbudget":7.7,"parti":"PS"},
                    {name:"Reims",y:21,"evolpartbudget":3.1,"parti":"PS"},
                    {name:"Le Havre",y:91,"evolpartbudget":6.0,"parti":"UMP"},
                    {name:"Saint-Etienne",y:44,"evolpartbudget":1.5,"parti":"PS"},
                    {name:"Toulon",y:62,"evolpartbudget":5.2,"parti":"UMP"},
                    {name:"Grenoble",y:22,"evolpartbudget":1.6,"parti":"PS"},
                    {name:"Dijon",y:18,"evolpartbudget":2.9,"parti":"PS"},
                    {name:"Angers",y:74,"evolpartbudget":7.5,"parti":"PS"},
                    {name:"Villeurbanne",y:-18,"evolpartbudget":7.0,"parti":"PS"},
                    {name:"Nimes",y:-28,"evolpartbudget":5.2,"parti":"UMP"},
                    {name:"Le Mans",y:36,"evolpartbudget":2.7,"parti":"PS"},
                    {name:"Clermont-Ferrand",y:50,"evolpartbudget":3.2,"parti":"PS"},
                    {name:"Aix-en-Provence",y:-3,"evolpartbudget":-2.7,"parti":"UMP"},
                    {name:"Brest",y:287,"evolpartbudget":37.8,"parti":"PS"},
                    {name:"Limoges",y:1,"evolpartbudget":3.8,"parti":"PS"},
                    {name:"Tours",y:0,"evolpartbudget":-0.9,"parti":"PS"},
                    {name:"Amiens",y:337,"evolpartbudget":37.3,"parti":"PS"},
                    {name:"Metz",y:59,"evolpartbudget":13.1,"parti":"PS"},
                    {name:"Perpignan",y:-87,"evolpartbudget":-3.3,"parti":"UMP"},
                    {name:"Boulogne-Billancourt",y:-89,"evolpartbudget":-5.6,"parti":"UMP"},
                    {name:"Besancon",y:70,"evolpartbudget":5.2,"parti":"PS"},
                    {name:"Orléans",y:20,"evolpartbudget":3.1,"parti":"UMP"},
                    {name:"Rouen",y:43,"evolpartbudget":-1.8,"parti":"PS"},
                    {name:"Mulhouse",y:17,"evolpartbudget":0.1,"parti":"UMP"},
                    {name:"Caen",y:81,"evolpartbudget":7.0,"parti":"PS"},
                    {name:"Saint-Denis",y:-126,"evolpartbudget":2.6,"parti":"PCF"},
                    {name:"Nancy",y:-8,"evolpartbudget":1.5,"parti":"UDI"},
                    {name:"Argenteuil",y:-101,"evolpartbudget":1.0,"parti":"PS"},
                    {name:"Montreuil",y:12,"evolpartbudget":16.1,"parti":"EELV"},
                    {name:"Roubaix",y:46,"evolpartbudget":2.3,"parti":"PS"},
                    {name:"Tourcoing",y:64,"evolpartbudget":2.1,"parti":"PS"},
                    {name:"Dunkerque",y:-34,"evolpartbudget":7.2,"parti":"PS"},
                    {name:"Créteil",y:27,"evolpartbudget":4.7,"parti":"PS"},
                    {name:"Avignon",y:0,"evolpartbudget":5.6,"parti":"UMP"},
                    {name:"Nanterre",y:35,"evolpartbudget":10.1,"parti":"Front de gauche / FASE"},
                    {name:"Courbevoie",y:39,"evolpartbudget":1.7,"parti":"UMP"},
                    {name:"Poitiers",y:28,"evolpartbudget":3.3,"parti":"PS"},
                    {name:"Vitry-sur-Seine",y:64,"evolpartbudget":7.2,"parti":"Front de gauche / PCF"},
                    {name:"Versailles",y:-10,"evolpartbudget":3.4,"parti":"UMP"},
                    {name:"Colombes",y:25,"evolpartbudget":4.8,"parti":"PS"}]
            }]
        },
        function(chart) { 
             // On trie en fonction du y de la première série
                
                var chart5 = $("#personnel").highcharts(),
                $button = $('#button4');
                var serie1 = chart5.series[0];
                var serie2 = chart5.series[1];
                /*serie2.hide();*/

                sortData(chart5,0);

                $button.click(function() {

                    if (serie1.visible) {
                            /*serie1.hide();
                            serie2.show();*/
                            var chart5 = $("#personnel").highcharts();
                            sortData(chart5,1); // Classe selon la 2ème série (1), affiche la 2ème série seulement (1)
                            
                            
                            
                            $button.html("Cliquez pour retourner aux chiffres de 2012");
                            $button.removeClass("btn_fonce");
                            $button.addClass("btn");
                            chart5.setTitle( { text: 'Quel poids pour les personnels municipaux dans le budget municipal ?' },{ text: 'Evolution des charges de personnel du budget divisées par le nombre d\'habitants, entre 2008 et 2012.' } )
                    } else {

                            var chart5 = $("#personnel").highcharts();
                            sortData(chart5,0); // Classe selon la 1ère série (0), affiche la 1ère série seulement (0)
                            /*chart5.series[0].setVisible(true,false);
                            chart5.series[1].setVisible(false,false);*/

                            $button.html('Cliquez pour voir l\'évolution 2008-2012');
                            $button.removeClass("btn");
                            $button.addClass("btn_fonce");
                            chart5.setTitle( { text: 'Quel poids pour les personnels municipaux dans le budget municipal ?' },{ text: 'Total des charges de personnel du budget, divisé par le nombre d\'habitants (2012).' } );
                            
                    }
                });

        });










$('#policiersmunicipaux').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 0,
                spacingRight: 60,
                spacingTop: 80
            },
            title: {
                text: 'Combien de policiers municipaux pour 100000 habitants ?',
                y: -50,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '16pt',
                    lineHeight: '22pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Chiffres de 2012.',
                verticalAlign: 'top',
                y: -5,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Paris","Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Le Mans","Clermont-Ferrand","Aix-en-Provence","Brest","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Saint-Denis","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Créteil","Avignon","Nanterre","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                }
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high'
                },
                labels: {
                    enabled: false
                },
                min: 0,
                max: 125,
                gridLineWidth: 0,
                plotLines: [{
                    color: '#ccc',
                    value: 50,
                    width: 1,
                    label: {
                        text: "Moyenne des 45 villes",
                        rotation: 90,
                        verticalAlign: 'bottom',
                        align: 'left',
                        y: -140,
                        x: 5
                    }
                }],
            },
            tooltip: {
                backgroundColor: 'rgba(255,255,255,1)',
                useHTML: true,
                borderRadius: 0,
                borderWidth: 2,
                formatter: function() {
                    return "<h2>"+this.x+" ("+this.point["parti"]+") :</h2><p><big>"+this.point['total']+"</big> policiers à municipaux, soit <big>"+Highcharts.numberFormat(this.point.y,0,","," ")+"</big> agents pour 100&nbsp;000 habitants.";
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0.1,
                    dataLabels: {
                        enabled: true,
                        formatter: function() {
                            return this.point.y;
                        },
                        style: {
                            fontWeight: 'bold'
                        }
                    },
                    colorByPoint: true
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Nombre de policiers municipaux",
                data: [{name:"Marseille",y:27,"total":229,"parti":"UMP"},
                {name:"Lyon",y:66,"total":326,"parti":"PS"},
                {name:"Toulouse",y:39,"total":175,"parti":"PS"},
                {name:"Nice",y:108,"total":370,"parti":"UMP"},
                {name:"Nantes",y:33,"total":94,"parti":"PS"},
                {name:"Strasbourg",y:58,"total":157,"parti":"PS"},
                {name:"Montpellier",y:49,"total":130,"parti":"PS"},
                {name:"Bordeaux",y:43,"total":104,"parti":"UMP"},
                {name:"Lille",y:43,"total":97,"parti":"PS"},
                {name:"Rennes",y:29,"total":60,"parti":"PS"},
                {name:"Reims",y:27,"total":49,"parti":"PS"},
                {name:"Le Havre",y:47,"total":82,"parti":"UMP"},
                {name:"Saint-Etienne",y:64,"total":108,"parti":"PS"},
                {name:"Toulon",y:59,"total":96,"parti":"UMP"},
                {name:"Grenoble",y:59,"total":93,"parti":"PS"},
                {name:"Dijon",y:71,"total":108,"parti":"PS"},
                {name:"Angers",y:36,"total":53,"parti":"PS"},
                {name:"Villeurbanne",y:26,"total":38,"parti":"PS"},
                {name:"Nimes",y:102,"total":148,"parti":"UMP"},
                {name:"Clermont-Ferrand",y:13,"total":19,"parti":"PS"},
                {name:"Aix-en-Provence",y:67,"total":94,"parti":"UMP"},
                {name:"Limoges",y:21,"total":29,"parti":"PS"},
                {name:"Tours",y:72,"total":97,"parti":"PS"},
                {name:"Amiens",y:53,"total":71,"parti":"PS"},
                {name:"Metz",y:71,"total":85,"parti":"PS"},
                {name:"Perpignan",y:74,"total":87,"parti":"UMP"},
                {name:"Boulogne-Billancourt",y:34,"total":39,"parti":"UMP"},
                {name:"Besancon",y:42,"total":49,"parti":"PS"},
                {name:"Orléans",y:94,"total":107,"parti":"UMP"},
                {name:"Rouen",y:53,"total":59,"parti":"PS"},
                {name:"Mulhouse",y:55,"total":61,"parti":"UMP"},
                {name:"Caen",y:53,"total":58,"parti":"PS"},
                {name:"Saint-Denis",y:27,"total":29,"parti":"PCF"},
                {name:"Nancy",y:45,"total":47,"parti":"UDI"},
                {name:"Argenteuil",y:34,"total":35,"parti":"PS"},
                {name:"Montreuil",y:5,"total":5,"parti":"EELV"},
                {name:"Roubaix",y:63,"total":59,"parti":"PS"},
                {name:"Tourcoing",y:50,"total":46,"parti":"PS"},
                {name:"Dunkerque",y:50,"total":46,"parti":"PS"},
                {name:"Avignon",y:116,"total":105,"parti":"UMP"},
                {name:"Courbevoie",y:63,"total":56,"parti":"UMP"},
                {name:"Poitiers",y:19,"total":17,"parti":"PS"},
                {name:"Vitry-sur-Seine",y:34,"total":29,"parti":"Front de gauche / PCF"},
                {name:"Versailles",y:28,"total":24,"parti":"UMP"},
                {name:"Colombes",y:46,"total":39,"parti":"PS"}]
                     }]
        },
        function(chart) { 
             // On trie en fonction du y de la première série
                
                var chart6 = $("#policiersmunicipaux").highcharts();

                sortDataLite(chart6,"inverse");

        });






$('#isf').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 0,
                spacingRight: 0,
                spacingTop: 80
            },
            title: {
                text: 'Quelle part de la population paye l\'impôt de solidarité sur la fortune ?',
                y: -60,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '16pt',
                    lineHeight: '22pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Chiffres de 2011.',
                verticalAlign: 'top',
                y: -10,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Clermont-Ferrand","Aix-en-Provence","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Avignon","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                }
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high'
                },
                labels: {
                    enabled: false
                },
                min: 0,
                max: 3.1,
                endOnTick: false,
                gridLineWidth: 0
            },
            tooltip: {
                backgroundColor: 'rgba(255,255,255,1)',
                useHTML: true,
                positioner: function () {
                    return { x: 320, y: 200 };
                },
                borderRadius: 0,
                borderWidth: 2,
                formatter: function() {
                    
                        return "<h2>"+this.x+" ("+this.point["parti"]+") :</h2><p><big>"+this.point['redevables']+"</big> personnes payent l'ISF, sur une population de <big>"+Highcharts.numberFormat(this.point['pop'],0,","," ")+"</big> habitants, soit une proportion de <big>"+Highcharts.numberFormat(this.y,1,',','&nbsp;')+" %</big>.</p>";
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0,
                    dataLabels: {
                        enabled: true,
                        formatter: function() {
                            return Highcharts.numberFormat(this.y,2,","," ")+" %";
                        },
                        style: {
                            fontWeight: 'bold'
                        }
                    },
                    colorByPoint: true
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Redevables à l'ISF",
                data:[{name:"Paris",y:2.43,"redevables":54691,"parti":"PS","pop":2249975},
{name:"Marseille",y:0.39,"redevables":3289,"parti":"UMP","pop":850636},
{name:"Lyon",y:0.75,"redevables":3687,"parti":"PS","pop":491268},
{name:"Toulouse",y:0.50,"redevables":2223,"parti":"PS","pop":447340},
{name:"Nice",y:0.77,"redevables":2652,"parti":"UMP","pop":344064},
{name:"Nantes",y:0.64,"redevables":1849,"parti":"PS","pop":287845},
{name:"Strasbourg",y:0.54,"redevables":1476,"parti":"PS","pop":272222},
{name:"Montpellier",y:0.35,"redevables":915,"parti":"PS","pop":264538},
{name:"Bordeaux",y:0.76,"redevables":1820,"parti":"UMP","pop":239399},
{name:"Lille",y:0.35,"redevables":792,"parti":"PS","pop":227533},
{name:"Rennes",y:0.51,"redevables":1062,"parti":"PS","pop":208033},
{name:"Reims",y:0.39,"redevables":698,"parti":"PS","pop":180752},
{name:"Le Havre",y:0.20,"redevables":356,"parti":"UMP","pop":174156},
{name:"Saint-Etienne",y:0.28,"redevables":479,"parti":"PS","pop":170049},
{name:"Toulon",y:0.36,"redevables":594,"parti":"UMP","pop":163974},
{name:"Grenoble",y:0.39,"redevables":615,"parti":"PS","pop":157424},
{name:"Dijon",y:0.38,"redevables":573,"parti":"PS","pop":151672},
{name:"Angers",y:0.38,"redevables":566,"parti":"PS","pop":148803},
{name:"Villeurbanne",y:0.16,"redevables":229,"parti":"PS","pop":145034},
{name:"Nimes",y:0.42,"redevables":602,"parti":"UMP","pop":144940},
{name:"Le Mans",y:0.32,"redevables":456,"parti":"PS","pop":143240},
{name:"Clermont-Ferrand",y:0.28,"redevables":398,"parti":"PS","pop":140957},
{name:"Aix-en-Provence",y:1.09,"redevables":1530,"parti":"UMP","pop":140684},
{name:"Brest",y:0.19,"redevables":272,"parti":"PS","pop":140547},
{name:"Limoges",y:0.32,"redevables":435,"parti":"PS","pop":137758},
{name:"Tours",y:0.44,"redevables":591,"parti":"PS","pop":134633},
{name:"Amiens",y:0.35,"redevables":473,"parti":"PS","pop":133327},
{name:"Metz",y:0.33,"redevables":392,"parti":"PS","pop":119962},
{name:"Perpignan",y:0.35,"redevables":411,"parti":"UMP","pop":118238},
{name:"Boulogne-Billancourt",y:2.66,"redevables":3097,"parti":"UMP","pop":116220},
{name:"Besancon",y:0.29,"redevables":334,"parti":"PS","pop":115879},
{name:"Orléans",y:0.46,"redevables":525,"parti":"UMP","pop":114185},
{name:"Rouen",y:0.43,"redevables":480,"parti":"PS","pop":111553},
{name:"Mulhouse",y:0.25,"redevables":275,"parti":"UMP","pop":110351},
{name:"Caen",y:0.50,"redevables":546,"parti":"PS","pop":108793},
{name:"Nancy",y:0.56,"redevables":585,"parti":"UDI","pop":105382},
{name:"Argenteuil",y:0.13,"redevables":132,"parti":"PS","pop":104282},
{name:"Montreuil",y:0.19,"redevables":199,"parti":"EELV","pop":103068},
{name:"Roubaix",y:0.16,"redevables":155,"parti":"PS","pop":94186},
{name:"Tourcoing",y:0.12,"redevables":115,"parti":"PS","pop":92018},
{name:"Dunkerque",y:0.24,"redevables":217,"parti":"PS","pop":91386},
{name:"Créteil",y:0.23,"redevables":205,"parti":"PS","pop":90528},
{name:"Avignon",y:0.34,"redevables":311,"parti":"UMP","pop":90194},
{name:"Nanterre",y:0.21,"redevables":184,"parti":"Front de gauche / FASE","pop":89476},
{name:"Courbevoie",y:0.97,"redevables":856,"parti":"UMP","pop":88530},
{name:"Poitiers",y:0.27,"redevables":239,"parti":"PS","pop":87906},
{name:"Vitry-sur-Seine",y:0.15,"redevables":132,"parti":"Front de gauche / PCF","pop":86375},
{name:"Versailles",y:2.57,"redevables":2218,"parti":"UMP","pop":86307},
{name:"Colombes",y:0.42,"redevables":357,"parti":"PS","pop":85102}]
                     }]
        },
        function(chart) { 
             // On trie en fonction du y de la première série
                
                var chart7 = $("#isf").highcharts();

                sortDataLite(chart7,"inverse");

        });





$('#age').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 0,
                spacingRight: 30,
                spacingTop: 60,
                spacingLeft: 0
            },
            title: {
                text: 'Quelle part de la population a plus de 75 ans ?',
                y: -30,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '16pt',
                    lineHeight: '22pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Chiffres de 2009.',
                verticalAlign: 'top',
                y: -8,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Clermont-Ferrand","Aix-en-Provence","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Avignon","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                }
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high'
                },
                labels: {
                    enabled: false
                },
                min: 3,
                max: 14.5,
                gridLineWidth: 0
            },
            tooltip: {
                backgroundColor: 'rgba(255,255,255,1)',
                useHTML: true,
                borderRadius: 0,
                borderWidth: 2,
                formatter: function() {
                    
                        return "<h2>"+this.x+" ("+this.point["parti"]+") :</h2><p><big>"+Highcharts.numberFormat(this.point.y,2,","," ")+" %</big> de la population a plus de 75 ans.</p>";
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0,
                    dataLabels: {
                        enabled: true,
                        formatter: function() {
                            return Highcharts.numberFormat(this.y,2,","," ")+" %";
                        },
                        style: {
                            fontWeight: 'bold'
                        }
                    },
                    colorByPoint: true
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Part de la population âgée de plus de 75 ans",
                data:[{name:"Paris",y:7.42,"parti":"PS"},
{name:"Marseille",y:9.5,"parti":"UMP"},
{name:"Lyon",y:8.12,"parti":"PS"},
{name:"Toulouse",y:7.31,"parti":"PS"},
{name:"Nice",y:12.53,"parti":"UMP"},
{name:"Nantes",y:7.86,"parti":"PS"},
{name:"Strasbourg",y:6.93,"parti":"PS"},
{name:"Montpellier",y:7.53,"parti":"PS"},
{name:"Bordeaux",y:8.14,"parti":"UMP"},
{name:"Lille",y:5.51,"parti":"PS"},
{name:"Rennes",y:7.47,"parti":"PS"},
{name:"Reims",y:7.73,"parti":"PS"},
{name:"Le Havre",y:9.39,"parti":"UMP"},
{name:"Saint-Etienne",y:11.41,"parti":"PS"},
{name:"Toulon",y:12,"parti":"UMP"},
{name:"Grenoble",y:8.67,"parti":"PS"},
{name:"Dijon",y:9.23,"parti":"PS"},
{name:"Angers",y:9.24,"parti":"PS"},
{name:"Villeurbanne",y:7.37,"parti":"PS"},
{name:"Nimes",y:10.09,"parti":"UMP"},
{name:"Le Mans",y:10.76,"parti":"PS"},
{name:"Clermont-Ferrand",y:8.28,"parti":"PS"},
{name:"Aix-en-Provence",y:8.94,"parti":"UMP"},
{name:"Brest",y:8.68,"parti":"PS"},
{name:"Limoges",y:10.76,"parti":"PS"},
{name:"Tours",y:9.82,"parti":"PS"},
{name:"Amiens",y:7.07,"parti":"PS"},
{name:"Metz",y:7.13,"parti":"PS"},
{name:"Perpignan",y:12.02,"parti":"UMP"},
{name:"Boulogne-Billancourt",y:8.64,"parti":"UMP"},
{name:"Besancon",y:8.33,"parti":"PS"},
{name:"Orléans",y:7.36,"parti":"UMP"},
{name:"Rouen",y:8.01,"parti":"PS"},
{name:"Mulhouse",y:7.92,"parti":"UMP"},
{name:"Caen",y:9.93,"parti":"PS"},
{name:"Saint-Denis",y:3.75,"parti":"PCF"},
{name:"Nancy",y:7.38,"parti":"UDI"},
{name:"Argenteuil",y:5.38,"parti":"PS"},
{name:"Montreuil",y:5.48,"parti":"EELV"},
{name:"Roubaix",y:5.61,"parti":"PS"},
{name:"Tourcoing",y:6.31,"parti":"PS"},
{name:"Dunkerque",y:8.02,"parti":"PS"},
{name:"Créteil",y:5.24,"parti":"PS"},
{name:"Avignon",y:9.07,"parti":"UMP"},
{name:"Nanterre",y:4.67,"parti":"Front de gauche / FASE"},
{name:"Courbevoie",y:6.32,"parti":"UMP"},
{name:"Poitiers",y:7.84,"parti":"PS"},
{name:"Vitry-sur-Seine",y:6.26,"parti":"Front de gauche / PCF"},
{name:"Versailles",y:9.51,"parti":"UMP"},
{name:"Colombes",y:5.97,"parti":"PS"}]
                     }]
        },
        function(chart) { 
             // On trie en fonction du y de la première série
                
                var chart8 = $("#age").highcharts();

                sortDataLite(chart8,"inverse");

        });










$('#logementsocial').highcharts({
            chart: {
                type: 'bar',
                spacingBottom: 20,
                spacingRight: 50,
                spacingTop: 60,
                spacingLeft: 0
            },
            title: {
                text: 'Quelle part de logements sociaux ?',
                y: -30,
                verticalAlign: 'top',
                style: {
                    fontFamily: "'TheSerifOffice', Arial, sans-serif",
                    fontSize: '16pt',
                    lineHeight: '22pt',
                    color: '#000000'
                }
            },
            subtitle: {
                text: 'Chiffres du 1er janvier 2012.',
                verticalAlign: 'top',
                y: -8,
                style: {
                    fontFamily: 'arial,sans-serif',
                    fontSize: '10pt',
                    color: '#000000'
                }
            },
            xAxis: {
                categories: ["Marseille","Lyon","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Rennes","Reims","Le Havre","Saint-Etienne","Toulon","Grenoble","Dijon","Angers","Villeurbanne","Nimes","Clermont-Ferrand","Aix-en-Provence","Limoges","Tours","Amiens","Metz","Perpignan","Boulogne-Billancourt","Besancon","Orléans","Rouen","Mulhouse","Caen","Nancy","Argenteuil","Montreuil","Roubaix","Tourcoing","Dunkerque","Avignon","Courbevoie","Poitiers","Vitry-sur-Seine","Versailles","Colombes"],
                title: {
                    text: null
                },
                labels: {
                    style: {
                        fontSize: '7pt'
                    }
                }
            },
            yAxis: {
                title: {
                    text: '',
                    align: 'high'
                },
                labels: {
                    enabled: false
                },
                min: 11,
                max: 45,
                gridLineWidth: 0,
                plotLines: [{
                    color: '#ccc',
                    value: 20,
                    width: 1,
                    label: {
                        text: "Quota imposé par la loi jusqu'à la fin 2012 (20 %)",
                        rotation: 0,
                        verticalAlign: 'bottom',
                        align: 'left',
                        y: 0,
                        x: 5
                    }
                },{
                    color: '#ccc',
                    value: 25,
                    width: 1,
                    label: {
                        text: "Nouveau quota depuis le début 2013 (25 %)",
                        rotation: 0,
                        verticalAlign: 'bottom',
                        align: 'left',
                        y: -30,
                        x: 5
                    }
                }],
            },
            tooltip: {
                backgroundColor: 'rgba(255,255,255,1)',
                useHTML: true,
                borderRadius: 0,
                borderWidth: 2,
                formatter: function() {
                    
                        return "<h2>"+this.x+" ("+this.point["parti"]+") :</h2><p><big>"+Highcharts.numberFormat(this.point.y,2,","," ")+" %</big> de logements sociaux dans la commune.</p>";
                }
            },
            plotOptions: {
                bar: {
                    groupPadding:0,
                    dataLabels: {
                        enabled: true,
                        formatter: function() {
                            return Highcharts.numberFormat(this.y,2,","," ")+" %";
                        },
                        style: {
                            fontWeight: 'bold'
                        }
                    },
                    colorByPoint: true
                }
            },
            legend: {
                enabled: false,
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
                name: "Part de logements sociaux",
                data:[{name:"Rennes",y:33.71,"parti":"PS"},
                {name:"Le Havre",y:33,"parti":"UMP"},
                {name:"Strasbourg",y:29,"parti":"PS"},
                {name:"Lille",y:26,"parti":"PS"},
                {name:"Nantes",y:25.09,"parti":"PS"},
                {name:"Montpellier",y:21.74,"parti":"PS"},
                {name:"Grenoble",y:21.3,"parti":"PS"},
                {name:"Toulouse",y:20.09,"parti":"PS"},
                {name:"Marseille",y:20,"parti":"UMP"},
                {name:"Lyon",y:19.26,"parti":"PS"},
                {name:"Aix-en-Provence",y:19.12,"parti":"UMP"},
                {name:"Paris",y:17.38,"parti":"PS"},
                {name:"Dijon",y:16.2,"parti":"PS"},
                {name:"Bordeaux",y:16.03,"parti":"UMP"},
                {name:"Toulon",y:14.8,"parti":"UMP"},
                {name:"Nice",y:11.96,"parti":"UMP"}]
                     }]
        },
        function(chart) { 
             // On trie en fonction du y de la première série
                
                var chart9 = $("#logementsocial").highcharts();

                sortDataLite(chart9,"inverse");

        });












    });



function assocCouleurs(data) {
              switch(data["parti"]) {
                    case "UMP":
                         return '#2c59a8';
                    break;
                    case "PS":
                         return '#d41066';
                    break;
                    case "EELV":
                         return '#608a32';
                    break;
                    case "UDI":
                         return '#5bc1f4';
                    break;
                    case "Front de gauche / PCF":
                    case "PCF":
                    case "Front de gauche / FASE":
                         return '#b50b11';
                    break;
                        
                };
}












 var sortData = function(chartSource,quelleserieclasser) {
            var graphe = chartSource.container.id;
            console.log(graphe)

            var series = chartSource.series;
             series[0].setVisible(true,false);
             series[1].setVisible(true,false);
           
         /*  console.log(series)*/
            var axis = chartSource.xAxis[0];
            var categories = [];
            
            if($.isArray(series)) {

                if(quelleserieclasser == 0) { 
                    var ser = $.grep(series, function(ser, seriesIndex) {
                            if(graphe == "highcharts-0") {
                                return ser.name == "Encours de la dette par habitant";
                            }
                            if(graphe == "highcharts-2") {
                                return ser.name == "Produit de la taxe d\'habitation par habitant";
                            }
                            if(graphe == "highcharts-4") {
                                return ser.name == "Produit de la taxe sur le foncier bâti par habitant";
                            }
                            if(graphe == "highcharts-4") {
                                return ser.name == "Produit de la taxe sur le foncier bâti par habitant";
                            }
                            if(graphe == "highcharts-6") {
                                return ser.name == "Charges de personnel par habitant";
                            }
                    })[0];
                }
                if(quelleserieclasser == 1) { 
                    var ser = $.grep(series, function(ser, seriesIndex) {
                        if(graphe == "highcharts-0") {
                            return ser.name == "Evolution de l'encours de la dette par habitant (2008-2012)";
                        }
                        if(graphe == "highcharts-2") {
                            return ser.name == "Evolution du produit de la taxe d\'habitation par habitant";
                        }
                        if(graphe == "highcharts-4") {
                                return ser.name == "Evolution du produit par habitant de la taxe sur le foncier bâti par habitant";
                        }
                        if(graphe == "highcharts-6") {
                                return ser.name == "Charges de personnel par habitant";
                            }
                    })[0];
                }
                


                $.each(series[quelleserieclasser].data, function(dataIndex, datum) {
                    var obj = {
                        name: datum.name,
                        index: dataIndex,
                        stackTotal: datum.y
                    }
                    categories.push(obj);
                });
            }
            
            categories.sort(function(a, b) {
                var aName = a.name.toLowerCase();
                var bName = b.name.toLowerCase();
                var aTotal = a.stackTotal;
                var bTotal = b.stackTotal;
                if(aTotal === bTotal) {
                    return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
                } else {
                    return ((aTotal > bTotal) ? -1 : ((aTotal < bTotal) ? 1 : 0));
                }
            });

            
            var mappedIndex = $.map(categories, function(category, index) {
                return category.index;
            });
            
            categories = $.map(categories, function(category, index) {
                return index+1+" · "+category.name;
            });
            
            axis.setCategories(categories);
                
                var data0 = new Array();
                $.map(mappedIndex, function(mappedIndex, origIndex) {
                    data0[origIndex] = { 
                        name: series[0].data[mappedIndex].name,
                        y: series[0].data[mappedIndex].y, // Numéraire 2012
                        "numeraire2012": series[0].data[mappedIndex].y, // Numéraire 2012 (bis)
                        color: assocCouleurs(series[0].data[mappedIndex]),
                        "parti": series[0].data[mappedIndex]["parti"],
                        "2008": series[0].data[mappedIndex]["2008"],
                        "2009": series[0].data[mappedIndex]["2009"],
                        "evolution2012": series[1].data[mappedIndex].y,
                        "pourcentage": series[1].data[mappedIndex]["pourcentage"],
                        "partbudget": series[0].data[mappedIndex]["partbudget"],
                        "partbudget2008": series[0].data[mappedIndex]["partbudget2008"],
                        "evolpartbudget": series[1].data[mappedIndex]["evolpartbudget"]
                    }
                });
                var data1 = new Array();
                $.map(mappedIndex, function(mappedIndex, origIndex) {

                    data1[origIndex] = { 
                        name: series[1].data[mappedIndex].name,
                        y: series[1].data[mappedIndex].y,
                        "numeraire2012": series[0].data[mappedIndex].y,
                        color: assocCouleurs(series[1].data[mappedIndex]),
                        "parti": series[1].data[mappedIndex]["parti"],
                        "2008": series[0].data[mappedIndex]["2008"],
                        "2009": series[0].data[mappedIndex]["2009"],
                        "evolution2012": series[1].data[mappedIndex].y,
                        "pourcentage": series[1].data[mappedIndex]["pourcentage"],
                        "partbudget": series[0].data[mappedIndex]["partbudget"],
                        "partbudget2008": series[0].data[mappedIndex]["partbudget2008"],
                        "evolpartbudget": series[1].data[mappedIndex]["evolpartbudget"]
                    }

                });
                /*console.log(data1)
                 console.log("data0")
               console.log(data0)
               console.log("data1")
               console.log(data1)*/
               chartSource.series[0].setData(data0,true);
                chartSource.series[1].setData(data1,true);
                
               
                if(quelleserieclasser == 0) { 
                series[0].setVisible(true,false);
                series[1].setVisible(false,false);
                    if(graphe == "highcharts-0") { // Endettement
                        chartSource.yAxis[0].update({
                            plotLines: [{
                                color: '#ccc',
                                value: 1109,
                                width: 1,
                                label: {
                                    text: "Moyenne des 50 villes",
                                    rotation: 90,
                                    verticalAlign: 'bottom',
                                    align: 'center',
                                    y: -70,
                                    x: 7
                                }
                            }]
                        });
                    }
                    if(graphe == "highcharts-2") { // Taxe habitation
                        chartSource.yAxis[0].update({
                            plotLines: [{
                                color: '#ccc',
                                value: 218.6,
                                width: 1,
                                label: {
                                    text: "Moyenne des 50 villes",
                                    rotation: 0,
                                    verticalAlign: 'bottom',
                                    align: 'left',
                                    y: 0,
                                    x: 2
                                }
                            }],
                            min:0,
                            max: 450
                        });
                    }
                    if(graphe == "highcharts-4") { // Taxe foncier
                        chartSource.yAxis[0].update({
                            plotLines: [{
                                color: '#ccc',
                                value: 293.3,
                                width: 1,
                                label: {
                                    text: "Moyenne des 50 villes",
                                    rotation: 0,
                                    verticalAlign: 'bottom',
                                    align: 'left',
                                    y: 0,
                                    x: 5
                                }
                            }],
                            max: null
                        });
                    }
                    if(graphe == "highcharts-6") { // Personnel
                        chartSource.yAxis[0].update({
                            plotLines: [{
                                color: '#ccc',
                                value: 679,
                                width: 1,
                                label: {
                                    text: "Moyenne des 50 villes",
                                    rotation: 0,
                                    verticalAlign: 'bottom',
                                    align: 'left',
                                    y: 0,
                                    x: 5
                                }
                                }],
                                min:null,
                                max: 1300
                        });
                    }

                }
                if(quelleserieclasser == 1) { 
                series[0].setVisible(false,false);
                series[1].setVisible(true,false);
                    chartSource.yAxis[0].update({
                        plotLines: null,
                        min: null
                    });
                    if(graphe == "highcharts-2") {
                        chartSource.yAxis[0].update({
                         max: 160,
                         plotLines: [{
                                color: '#ccc',
                                value: 34,
                                width: 1,
                                label: {
                                    text: "Moyenne des 50 villes",
                                    rotation: 0,
                                    verticalAlign: 'bottom',
                                    align: 'left',
                                    y: 0,
                                    x: 2
                                }
                            }],
                     });
                    };
                    if(graphe == "highcharts-4") {
                        chartSource.yAxis[0].update({
                         max: 260
                        });
                    };
                    if(graphe == "highcharts-6") {
                        chartSource.yAxis[0].update({
                         max: 450,
                         min: -250
                        });
                    };
                    
                }
               
               console.log(chartSource.series)
               
                /*chartSource.series[quelleserieclasser].setData(data);*/
        };
    






var sortDataLite = function(chartSource,sens) {
            var series = chartSource.series;
                       
             var axis = chartSource.xAxis[0];
            var categories = [];
            
            if($.isArray(series)) {

                var ser = series[0];
                


                $.each(series[0].data, function(dataIndex, datum) {
                    var obj = {
                        name: datum.name,
                        index: dataIndex,
                        stackTotal: datum.y
                    }
                    categories.push(obj);
                });
            }
            
            categories.sort(function(a, b) {
                var aName = a.name.toLowerCase();
                var bName = b.name.toLowerCase();
                var aTotal = a.stackTotal;
                var bTotal = b.stackTotal;
                if(sens == "inverse") {
                    if(aTotal === bTotal) {
                    return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
                    } else {
                        return ((aTotal > bTotal) ? -1 : ((aTotal < bTotal) ? 1 : 0));
                    }
                }
                else {
                    if(aTotal === bTotal) {
                        return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
                    } else {
                        return ((aTotal < bTotal) ? -1 : ((aTotal > bTotal) ? 1 : 0));
                    }
                }
            });

            
            var mappedIndex = $.map(categories, function(category, index) {
                return category.index;
            });
            
            categories = $.map(categories, function(category, index) {
                return index+1+" · "+category.name;
            });
            
            axis.setCategories(categories);
                
                var data = new Array();
                if(ser.name == "Nombre de policiers municipaux") {
                    $.map(mappedIndex, function(mappedIndex, origIndex) {
                        data[origIndex] = { 
                            name: series[0].data[mappedIndex].name,
                            y: series[0].data[mappedIndex].y,
                            "total": series[0].data[mappedIndex]['total'],
                            color: assocCouleurs(series[0].data[mappedIndex]),
                            "parti": series[0].data[mappedIndex]["parti"],
                            "parhabitant": series[0].data[mappedIndex]["parhabitant"]
                        }
                    });
                }
                if(ser.name == "Redevables à l'ISF") {
                    $.map(mappedIndex, function(mappedIndex, origIndex) {
                        data[origIndex] = { 
                            name: series[0].data[mappedIndex].name,
                            y: series[0].data[mappedIndex].y,
                            "redevables": series[0].data[mappedIndex]['redevables'],
                            color: assocCouleurs(series[0].data[mappedIndex]),
                            "pop": series[0].data[mappedIndex]["pop"],
                            "parti": series[0].data[mappedIndex]["parti"]
                        }
                    });
                }
                if(ser.name == "Part de la population âgée de plus de 75 ans") {
                    $.map(mappedIndex, function(mappedIndex, origIndex) {
                        data[origIndex] = { 
                            name: series[0].data[mappedIndex].name,
                            y: series[0].data[mappedIndex].y,
                            "parti": series[0].data[mappedIndex]["parti"],
                            color: assocCouleurs(series[0].data[mappedIndex])
                        }
                    });
                }
                if(ser.name == "Part de logements sociaux") {
                    $.map(mappedIndex, function(mappedIndex, origIndex) {
                        data[origIndex] = { 
                            name: series[0].data[mappedIndex].name,
                            y: series[0].data[mappedIndex].y,
                            "parti": series[0].data[mappedIndex]["parti"],
                            color: assocCouleurs(series[0].data[mappedIndex])
                        }
                    });
                }
               chartSource.series[0].setData(data,true);
                
};
    

</script>


     </head>
  <body>
    <script src="http://code.highcharts.com/highcharts.js"></script>
<div class="_global">
    <div class="container_18 clearfix">

    <article class="article article_normal" id="articleBody">

       <!-- Intro -->
       <div class="container_18 bordb1 bord_gris_moyen clearfix">
            <div class="grid_12 alpha txt6">
                <p>Les villes de gauche réclament-elles plus d’impôts à leurs admninistrés ? Les communes de droite sont-elles moins endettés ? Où trouve-t-on le plus de policiers municipaux ? Quels partis recrutent-ils le plus de policiers municipaux ?</p>
                <p>A deux semaines des élections municipales, Le Monde a décortiqué les comptes des 50 plus grandes villes de France, pour analyser d’éventuelles différences selon la couleur politique. Si certains présupposés sont confortés, d’autres résultats s’avèrent plus étonnants.</p>
            </div>
            <div class="article txt4 grid_6 omega col_droite">
                <div class="bloc_base menu_ancre">
                    <ul class="liste_chevron lien_ancres"> 
                        <li><a href="#isf">L'impôt de solidarité sur la fortune</a></li> 
                        <li><a href="#age">L'âge de la population</a></li>
                        <li><a href="#endettement">L'âge de la population</a></li>
                        <li><a href="#taxehabitation">La fiscalité locale</a></li>
                        <li><a href="#policiersmunicipaux">La police municipale</a></li>
                        <li><a href="#logementsocial">Le logement social</a></li> 
                    </ul> 
                </div>
            </div>
        </div>

        <!-- Méthodo -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
             <div class="graphe grid_10 alpha">
                    <p style="padding-top:25px"><iframe src="http://cf.datawrapper.de/PnSCc/1/" frameborder="0" allowtransparency="true" allowfullscreen="allowfullscreen" webkitallowfullscreen="webkitallowfullscreen" mozallowfullscreen="mozallowfullscreen" oallowfullscreen="oallowfullscreen" msallowfullscreen="msallowfullscreen" width="534" height="400"></iframe></p>
             </div>

            <div class="article txt4 grid_8 omega">
                <p>Avant d’entamer toute comparaison, il faut prendre en compte un biais statistique de taille : l’ultra-domination du Parti socialiste dans la gestion des communes : 31 des 50 villes étudiées sont administrées par des maires socialistes, contre 14 pour l’UMP.</p>
                <p>A l’inverse, il sera difficile de tirer des conclusions à portée générale sur la gestion des centristes, des écologistes (une seule ville) ou du Front de gauche (3 villes).</p>
                <p class="tt20">Le classement des villes par population :</p>
                <div class="classement-villes txt3_120">


                <ol>
                    <li class="ps" title="PS - 2 249 975 habitants">Paris</li>
                    <li class="ump" title="UMP - 850 636 habitants">Marseille</li>
                    <li class="ps" title="PS - 491 268 habitants">Lyon</li>
                    <li class="ps" title="PS - 447 340 habitants">Toulouse</li>
                    <li class="ump" title="UMP - 344 064 habitants">Nice</li>
                    <li class="ps" title="PS - 287 845 habitants">Nantes</li>
                    <li class="ps" title="PS - 272 222 habitants">Strasbourg</li>
                    <li class="ps" title="PS - 264 538 habitants">Montpellier</li>
                    <li class="ump" title="UMP - 239 399 habitants">Bordeaux</li>
                    <li class="ps" title="PS - 227 533 habitants">Lille</li>
                    <li class="ps" title="PS - 208 033 habitants">Rennes</li>
                    <li class="ps" title="PS - 180 752 habitants">Reims</li>
                    <li class="ump" title="UMP - 174 156 habitants">Le Havre</li>
                    <li class="ps" title="PS - 170 049 habitants">Saint-Étienne</li>
                    <li class="ump" title="UMP - 163 974 habitants">Toulon</li>
                    <li class="ps" title="PS - 157 424 habitants">Grenoble</li>
                    <li class="ps" title="PS - 151 672 habitants">Dijon</li>
                    <li class="ps" title="PS - 148 803 habitants">Angers</li>
                </ol>
                </div>
                <div class="classement-villes txt3_120">
                <ol start="19">
                    <li class="ps" title="PS - 145 034 habitants">Villeurbanne</li>
                    <li class="ump" title="UMP - 144 940 habitants">Nîmes</li>
                    <li class="ps" title="PS - 143 240 habitants">Le Mans</li>
                    <li class="ps" title="PS - 140 957 habitants">Clermont-Ferrand</li>
                    <li class="ump" title="UMP - 140 684 habitants">Aix-en-Provence</li>
                    <li class="ps" title="PS - 140 547 habitants">Brest</li>
                    <li class="ps" title="PS - 137 758 habitants">Limoges</li>
                    <li class="ps" title="PS - 134 633 habitants">Tours</li>
                    <li class="ps" title="PS - 133 327 habitants">Amiens</li>
                    <li class="ps" title="PS - 119 962 habitants">Metz</li>
                    <li class="ump" title="UMP - 118 238 habitants">Perpignan</li>
                    <li class="ump" title="UMP - 116 220 habitants">Boulogne-Billancourt</li>
                    <li class="ps" title="PS - 115 879 habitants">Besançon</li>
                    <li class="ump" title="UMP - 114 185 habitants">Orléans</li>
                    <li class="ps" title="PS - 111 553 habitants">Rouen</li>
                </ol>
                </div>
                <div class="classement-villes txt3_120">
                <ol start="34">
                    <li class="ump" title="UMP - 110 351 habitants">Mulhouse</li>
                    <li class="ps" title="PS - 108 793 habitants">Caen</li>
                    <li class="frontdegauche" title="PCF - 107 762 habitants">Saint-Denis</li>
                    <li class="udi" title="UDI - 105 382 habitants">Nancy</li>
                    <li class="ps" title="PS - 104 282 habitants">Argenteuil</li>
                    <li class="eelv" title="Europe Ecologie-Les Verts - 103 068 habitants">Montreuil</li>
                    <li class="ps" title="PS - 94 186 habitants">Roubaix</li>
                    <li class="ps" title="PS - 92 018 habitants">Tourcoing</li>
                    <li class="ps" title="PS - 91 386 habitants">Dunkerque</li>
                    <li class="ps" title="PS - 90 528 habitants">Créteil</li>
                    <li class="ump" title="UMP - 90 194 habitants">Avignon</li>
                    <li class="frontdegauche" title="Front de gauche (FASE) - 89 476 habitants">Nanterre</li>
                    <li class="ump" title="UMP - 88 530 habitants">Courbevoie</li>
                    <li class="ps" title="PS - 87 906 habitants">Poitiers</li>
                    <li class="frontdegauche" title="Front de gauche (PCF) - 86 375 habitants">Vitry-sur-Seine</li>
                    <li class="ump" title="UMP - 86 307 habitants">Versailles</li>
                    <li class="ps" title="PS - 85 102 habitants">Colombes</li>
                </ol>
                </div>
            </div>

         
        </div>


        <!-- ISF -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
             <div class="article txt15_140 grid_8 alpha">
                <p>Pas de surprise : sept des dix premières villes où l’on paye le plus d’impôt de solidarité sur la fortune (ISF) sont gérées par la droite et le centre. Montreuil, dirigée par l’écologiste Dominique Voynet, arrive en queue de peloton, comme Nanterre, Vitry-sur-Seine, gérées par le Front de gauche. Saint-Denis, communiste, n’apparaît même pas dans le classement, car elle compte moins de 50 redevables pour 108 000 habitants, ce qui empêche Bercy de publier ses chiffres pour des motifs de confidentialité.</p><p>L’acquittement de l’ISF est indépendant de toute décision municipale, mais son étude permet de confirmer un présupposé bien répandu : les villes les plus riches sont donc résolument plus à droite que les autres. A Boulogne-Billancourt (UMP), par exemple, 2,7 % de la population y est redevable, contre à peine 0,12 % à Tourcoing (PS).</p>
                <p><img src="img/isf.jpg" alt="Impôt de solidarité sur la fortune (ISF). Damien Meyer / AFP" /></p>
                 <p class="legendeimg">Damien Meyer / AFP.</p>

            </div>

            <div class="graphe grid_10 omega">
                    <div id="isf" style="width: 100%; height:800px; margin: 0 auto"></div>
                    <p class="notule">A Saint-Denis, le nombre de redevables étant inférieur à 50, les données n'ont pas été publiées par Bercy, par souci de respect de la vie privée.</p>
                    <p class="source">Source : <a href="http://www.data.gouv.fr/fr/dataset/impot-de-solidarite-sur-la-fortune" target="_blank">Bercy</a>.</p>
             </div>

         
        </div>

        <!-- Âge -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
             <div class="graphe grid_10 alpha">
                    <div id="age" style="width: 100%; height:900px; margin: 0 auto"></div>
                   <p class="source">Source : <a href="http://www.insee.fr/fr/themes/document.asp?ref_id=T10F036" target="_blank">Insee</a>.</p>
             </div>

            <div class="article txt15_140 grid_8 omega">
                <p><span class="tt40_capital chiffre_exergue">9,5 %</span> Deuxième cliché confirmé par les données : l’ancrage à droite des villes les plus âgées. Nice, Perpignan et Toulon, qui comptent toutes trois plus de 12 % d’habitants de plus de 75 ans, sont tenues par l’UMP. Les villes socialistes se situent bien plus près de la moyenne nationale (9,5 %), tandis que le Front de gauche et les écologistes président aux destinées de villes comptant bien moins d’aînées.</p>
                <p><img src="img/nice.jpg" alt="Des personnes âgées sur la promenade des Anglais, à Nice. Eric Gaillard / Reuters." title="Des personnes âgées sur la promenade des Anglais, à Nice. Eric Gaillard / Reuters." /></p>
                <p class="legendeimg">Des personnes âgées sur la promenade des Anglais, à Nice. Eric Gaillard / Reuters.</p>
            </div>

        </div>


         <!-- Endettement -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">

            <div class="article txt15_140 grid_8 alpha">
                <p>L’endettement ramené au nombre d’habitants est l’un des indicateurs-clés pour évaluer l’action politique d’une municipalité.</p><p>Dans l’absolu, on ne remarque pas de différence notable entre droite et gauche. On retrouve trois villes UMP pour deux PS dans le top 5 du classement. On remarquera toutefois que les seules communes dont l’encours de la dette par habitant est sous la barre des 500 euros sont socialistes : Brest, Strasbourg, Angers, Toulouse, Metz et Villeurbanne.</p>
                <p class="bouton"><a class="btn_fonce" id="button">Cliquez pour voir l'évolution 2008-2012</a></p>
                <p><span class="tt40_capital chiffre_exergue">- 36 %</span> En revanche, quand on s’intéresse à l’évolution entre 2008 (les précédentes élections municipales) et 2012 (les derniers chiffres disponibles), on s’aperçoit que les socialistes ont eu tendance à creuser davantage la dette que la droite. C’est notamment le cas de Lille, qui a presque doublé son endettement sur cette période. A l’inverse, seules trois villes sur les quatorze gérées par l’UMP (Courbevoie, Le Havre et Mulhouse) ont augmenté l’encours de leur dette par habitant sur cette période. Toutefois, les deux champions de la réduction de la dette ne sont pas de droite, mais communiste (Saint-Denis, - 36 %) et écologiste (Montreuil, - 29 %).
                </p>
                   
                    <p><img src="img/lille.jpg" alt="L'endettement par habitant des Lillois a augmenté de 81 % entre 2008 et 2012. AFP / Philippe Huguen" title="L'endettement par habitant des Lillois a augmenté de 81 % entre 2008 et 2012. AFP / Philippe Huguen" /></p>
                <p class="legendeimg">L'endettement par habitant des Lillois a augmenté de 81 % entre 2008 et 2012. AFP / Philippe Huguen</p>
            </div>

            <div class="graphe grid_10 omega">
                    <div id="endettement" style="width: 100%; height:840px; margin: 0 auto"></div>
                    <p class="source">Source : <a href="http://www.collectivites-locales.gouv.fr/" target="_blank">Bercy - Comptes individuels des collectivités</a>.</p>
             </div>

        </div>


        <!-- Taxe d'habitation -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
             <div class="graphe grid_10 alpha">
                    <div id="taxehabitation" style="width: 100%; height:800px; margin: 0 auto"></div>
                    <p class="source">Source : <a href="http://www.collectivites-locales.gouv.fr/" target="_blank">Bercy - Comptes individuels des collectivités</a>.</p>
             </div>

            <div class="article txt15_140 grid_8 omega">
                <p>Premier cliché battu en brèche : ce n’est pas dans les villes de gauche, mais dans les villes de droite, que l’on paye le plus de taxe d’habitation. Nice, Bordeaux et Nîmes arrivent en tête du classement des villes où le produit de la taxe d’habitation par habitant est le plus grand. Entre 2009 et 2012, cet indicateur, qui correspond à la moyenne de la taxe d’habitation payée par chaque habitant, a progressé d’environ 30 euros dans ces villes.</p>
                <p class="bouton" id="bouton2"><a class="btn_fonce" id="button2">Cliquez pour voir l'évolution 2009-2012</a></p>
                <p><span class="tt40_capital chiffre_exergue">+ 130 %</span> La seule ville écologiste, Montreuil, qui était encore en queue de classement il y a trois ans, se place maintenant dans la moyenne, à l’issue d’une impressionnante progression de 130 %. Les villes tenues par le Front de gauche et le PCF se situent plutôt dans la moyenne basse, malgré une importante progression à Vitry-sur-Seine (+ 80 % entre 2009 et 2012).</p>
                <p><img src="img/bordeaux.jpg" alt="Bordeaux fait partie les villes les plus onéreuses en termes de taxe d'habitation par habitant. CC BY 2.0 / jacme31." title="v" /></p>
                <p class="legendeimg">Bordeaux fait partie les villes les plus onéreuses en termes de taxe d'habitation par habitant. CC BY 2.0 / jacme31.</p>

                
            </div>

        </div>


        <!-- Taxe foncier bâti -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
             <div class="article txt15_140 grid_8 alpha">
                <p>Le constat est proche pour la taxe foncière sur le bâti : l’UMP compte un nombre important de représentants dans le top 10 des villes les plus gourmandes, derrière Grenoble, en tête du classement avec une moyenne de 490 € par habitant.</p>
                   <p class="bouton" id="bouton3"><a class="btn_fonce" id="button3">Cliquez pour voir l'évolution 2009-2012</a></p>
                <p><span class="tt40_capital chiffre_exergue">- 3 %</span> La progression de cette taxe est également exponentielle à Montreuil, où elle est passée en trois ans de 143 à 372 € (+ 160 %). La seule commune où elle ait baissé se trouve être Dunkerque, gérée par le PS, où elle a reculé de 3 % entre 2009 et 2012.</p>
                <p><img src="img/montreuil.jpg" alt="A Montreuil, la taxe sur le foncier bâti a progressé de plus de 160 % entre 2009 et 2012. CC BY 2.0 / Damien Boilley." title="A Montreuil, la taxe sur le foncier bâti a progressé de plus de 160 % entre 2009 et 2012. CC BY 2.0 / Damien Boilley." /></p>
                <p class="legendeimg">A Montreuil, la taxe sur le foncier bâti a progressé de plus de 160&nbsp;% entre 2009 et 2012. CC BY 2.0 / Damien Boilley.</p>
                
            </div>

             <div class="graphe grid_10 omega">
                    <div id="taxefoncier" style="width: 100%; height:900px; margin: 0 auto"></div>
                    <p class="source">Source : <a href="http://www.collectivites-locales.gouv.fr/" target="_blank">Bercy - Comptes individuels des collectivités</a>.</p>
             </div>

            

        </div>


        <!-- Personnel -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
             <div class="graphe grid_10 alpha">
                    <div id="personnel" style="width: 100%; height:900px; margin: 0 auto"></div>
                    <p class="source">Source : <a href="http://www.collectivites-locales.gouv.fr/" target="_blank">Bercy - Comptes individuels des collectivités</a>.</p>
             </div>

            <div class="article txt15_140 grid_8 omega">
                <p>S’il n’existe pas de données exhaustives sur le nombre d’employés municipaux qui travaillent dans chaque mairie, un indicateur permet de s’en faire une idée : le coût des charges de personnel par habitant dans le budget de la commune.</p><p><span class="tt40_capital chiffre_exergue">143 €</span> Celui-ci fait apparaître une nette propension des mairies Front de gauche/PCF à consacrer d’importantes ressources aux frais de personnel (entre 800 et 1 200 € par habitant). A Nanterre, par exemple, ils représentaient 60 % des dépenses en 2012, soit 10 points de plus qu’en 2008. A l’inverse, la mairie écologiste de Montreuil est largement en queue de peloton, avec seulement 143 € par habitant.</p><p>L’UMP se situe plutôt dans la moyenne basse par rapport au PS, dont beaucoup de mairies ont augmenté ces frais en quatre ans. Ainsi, Amiens consacraient en 2012 337 € supplémentaires aux charges de personnel par rapport à 2008, ce poste passant de 7 à 44 % de son budget.</p>
                 <p class="bouton" id="bouton4"><a class="btn_fonce" id="button4">Cliquez pour voir l'évolution 2008-2012</a></p>
                 <p><img src="img/patrickjarry.jpg" alt="Patrick Jarry, le maire Front de gauche de Nanterre. AFP / Stéphane de Sakutin." title="Patrick Jarry, le maire Front de gauche de Nanterre. AFP / Stéphane de Sakutin." /></p>
                <p class="legendeimg">Patrick Jarry, le maire Front de gauche de Nanterre. AFP / Stéphane de Sakutin.</p>
            </div>

        </div>



        <!-- Policiers municipaux -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
            <div class="article txt15_140 grid_8 alpha">
                <p>Sans surprise, ce sont les villes UMP qui consacrent le plus de moyens à leur police municipale. A Avignon, qui trône en tête du classement, il y a 105 policiers pour 90 000 habitants, soit un policier pour 859 habitants. Un ratio bien inférieur à la plupart des villes socialistes, qui se situent entre 1000 et 4000 habitants à la charge de chaque policier municipal. Montreuil (EELV) est la moins dotée à cet égard, avec 5 policiers pour 100 000 habitants.</p>
                <p>Enfin, cinq communes - toutes de gauche - n’ont tout bonnement aucune police municipale : outre Paris (PS), où les pouvoirs de la police municipale sont exercés par le préfet de police, Le Mans (PS), Créteil (PS), Nanterre (Front de gauche) et Brest (PS) sont dépourvus d’agents municipaux. Un choix délibéré, <a href="http://www.anamzer.com/?p=4720">souvent justifié</a> par l’inneficacité supposée de la police municipale, et l’idée que la sécurité doit être assurée par la police nationale.</p>
                <p>Preuve que le sujet relève d’un clivage politique, les candidats UMP <a href="http://www.francebleu.fr/municipales-2014/telepherique/premier-debat-de-la-campagne-municipale-brest-ce-jeudi-en-direct-sur-france-bleu-breizh-izel-12065">à Brest</a>, <a href="http://www.lemainelibre.fr/actualite/le-mans-les-24-propositions-de-christelle-morancais-ump-28-02-2014-79554">au Mans</a>, <a href="http://thierryhebbrecht.fr/mes-convictions/">à Créteil</a> et <a href="http://nanterrepourchacun.fr/pour-la-police-municipale-et-la-video-protection/">à Nanterre</a> proposent tous de revenir sur cette exception. Seule Nathalie Kosciusko-Morizet, à Paris, reste prudente sur le sujet, <a href="http://www.nkmparis.fr/projet/securite/propositions">en expliquant que la création d’une police municipale parisienne relève de la loi</a>.</p>
                <p><img src="img/policemunicipale.jpg" alt="Avignon est la ville française la mieux dotée en police municipale. AFP / Sébastien Nogier." title="Avignon est la ville française la mieux dotée en police municipale. AFP / Sébastien Nogier." /></p>
                <p class="legendeimg">Avignon est la ville française la mieux dotée en police municipale. AFP / Sébastien Nogier.</p>
            </div>

            <div class="graphe grid_10 omega">
                    <div id="policiersmunicipaux" style="width: 100%; height:900px; margin: 0 auto"></div>
                    <p class="notule">Villes sans police municipale : Paris, Brest, Créteil, Le Mans et Nanterre.</p>
                    <p class="source">Source : <a href="http://www.data.gouv.fr/fr/dataset/les-polices-municipales-par-commune" target="_blank">ministère de l'intérieur</a>.</p>
             </div>

            

        </div>





         <!-- Logements sociaux -->
        <div class="container_18 alpha omega bordb1 bord_gris_moyen clearfix">
            
            <div class="article txt15_140 grid_8 alpha">
                <p><span class="tt40_capital chiffre_exergue">20/25 %</span>Sans surprise, ce sont les villes UMP qui consacrent le plus de moyens à leur police municipale. A Avignon, qui trône en tête du classement, il y a 105 policiers pour 90 000 habitants, soit un policier pour 859 habitants. Un ratio bien inférieur à la plupart des villes socialistes, qui se situent entre 1000 et 4000 habitants à la charge de chaque policier municipal. Montreuil (EELV) est la moins dotée à cet égard, avec 5 policiers pour 100 000 habitants.</p>
                <p>Enfin, cinq communes - toutes de gauche - n’ont tout bonnement aucune police municipale : outre Paris (PS), où les pouvoirs de la police municipale sont exercés par le préfet de police, Le Mans (PS), Créteil (PS), Nanterre (Front de gauche) et Brest (PS) sont dépourvus d’agents municipaux. Un choix délibéré, <a href="http://www.anamzer.com/?p=4720">souvent justifié</a> par l’inneficacité supposée de la police municipale, et l’idée que la sécurité doit être assurée par la police nationale.</p>
                <p>Preuve que le sujet relève d’un clivage politique, les candidats UMP <a href="http://www.francebleu.fr/municipales-2014/telepherique/premier-debat-de-la-campagne-municipale-brest-ce-jeudi-en-direct-sur-france-bleu-breizh-izel-12065">à Brest</a>, <a href="http://www.lemainelibre.fr/actualite/le-mans-les-24-propositions-de-christelle-morancais-ump-28-02-2014-79554">au Mans</a>, <a href="http://thierryhebbrecht.fr/mes-convictions/">à Créteil</a> et <a href="http://nanterrepourchacun.fr/pour-la-police-municipale-et-la-video-protection/">à Nanterre</a> proposent tous de revenir sur cette exception. Seule Nathalie Kosciusko-Morizet, à Paris, reste prudente sur le sujet, <a href="http://www.nkmparis.fr/projet/securite/propositions">en expliquant que la création d’une police municipale parisienne relève de la loi</a>.</p>
                <p><img src="img/hlm.jpg" alt="AFP." title="AFP." /></p>
                <p class="legendeimg">AFP.</p>
            </div>

            <div class="graphe grid_10 omega">
                    <div id="logementsocial" style="width: 100%; height:500px; margin: 0 auto"></div>
                    <p class="source">Source : <a href="http://www.lejdd.fr/Societe/Social/La-grande-pagaille-du-logement-social-en-France-645151" target="_blank"><em>Le Journal du Dimanche</em></a>.</p>
             </div>       

        </div>


    </article>
  </div>
</div>

</body>
</html>
